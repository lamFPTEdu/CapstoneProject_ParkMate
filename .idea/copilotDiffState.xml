<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ParkingDetailActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ParkingDetailActivity.java" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.os.Bundle;&#10;&#10;import com.parkmate.android.R;&#10;&#10;public class ParkingDetailActivity extends BaseActivity {&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        &#10;        // Thiết lập toolbar với nút quay lại (vì đây KHÔNG phải màn hình chính)&#10;        setupToolbar(false, &quot;Chi tiết bãi đỗ xe&quot;);&#10;        &#10;        // Ẩn bottom navigation vì đây là màn hình chi tiết&#10;        setupBottomNavigation(false, 0);&#10;        &#10;        // Khởi tạo các thành phần của màn hình chi tiết&#10;        initComponents();&#10;    }&#10;&#10;    @Override&#10;    protected int getLayoutResourceId() {&#10;        // Trả về ID layout của ParkingDetailActivity&#10;        return R.layout.activity_parking_detail;&#10;    }&#10;    &#10;    private void initComponents() {&#10;        // Khởi tạo các thành phần và xử lý sự kiện&#10;        // VD: Hiển thị thông tin chi tiết bãi đỗ xe, đặt chỗ, thanh toán...&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ProfileActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ProfileActivity.java" />
              <option name="originalContent" value="package com.parkmate.android.activity;&#10;&#10;import android.os.Bundle;&#10;import android.widget.ImageButton;&#10;import android.widget.ImageView;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.constraintlayout.widget.ConstraintLayout;&#10;&#10;import com.parkmate.android.R;&#10;&#10;public class ProfileActivity extends BaseActivity {&#10;&#10;    private ImageButton btnBack;&#10;    private ImageButton btnEditProfile;&#10;    private ImageView profileAvatar;&#10;    private TextView tvUserName;&#10;    private TextView tvUserEmail;&#10;    private ConstraintLayout menuMyBookings;&#10;    private ConstraintLayout menuMyVehicles;&#10;    private ConstraintLayout menuPaymentMethods;&#10;    private ConstraintLayout menuParkingHistory;&#10;    private ConstraintLayout menuSettings;&#10;    private ConstraintLayout menuHelpSupport;&#10;    private ConstraintLayout menuLogout;&#10;&#10;    @Override&#10;    protected int getLayoutResourceId() {&#10;        return R.layout.activity_profile;&#10;    }&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;&#10;        // Setup toolbar without search&#10;        setupToolbar(false); // false = show back button&#10;&#10;        // Setup bottom navigation with Account tab selected&#10;        setupBottomNavigation(true, R.id.nav_account);&#10;&#10;        initProfileViews();&#10;        loadUserInfo(); // Load thông tin user đã đăng nhập&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initProfileViews() {&#10;        btnBack = findViewById(R.id.btnBack);&#10;        btnEditProfile = findViewById(R.id.btnEditProfile);&#10;        profileAvatar = findViewById(R.id.profileAvatar);&#10;        tvUserName = findViewById(R.id.tvUserName);&#10;        tvUserEmail = findViewById(R.id.tvUserEmail);&#10;        menuMyBookings = findViewById(R.id.menuMyBookings);&#10;        menuMyVehicles = findViewById(R.id.menuMyVehicles);&#10;        menuPaymentMethods = findViewById(R.id.menuPaymentMethods);&#10;        menuParkingHistory = findViewById(R.id.menuParkingHistory);&#10;        menuSettings = findViewById(R.id.menuSettings);&#10;        menuHelpSupport = findViewById(R.id.menuHelpSupport);&#10;        menuLogout = findViewById(R.id.menuLogout);&#10;&#10;        // Hide the btnBack since we're using toolbar navigation&#10;        if (btnBack != null) {&#10;            btnBack.setVisibility(android.view.View.GONE);&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Load thông tin user từ UserManager và hiển thị lên UI&#10;     */&#10;    private void loadUserInfo() {&#10;        try {&#10;            com.parkmate.android.utils.UserManager userManager = com.parkmate.android.utils.UserManager.getInstance();&#10;&#10;            // Hiển thị tên user&#10;            String userName = userManager.getUserName();&#10;            if (tvUserName != null &amp;&amp; userName != null) {&#10;                tvUserName.setText(userName);&#10;            }&#10;&#10;            // Hiển thị email user&#10;            String userEmail = userManager.getUserEmail();&#10;            if (tvUserEmail != null &amp;&amp; userEmail != null) {&#10;                tvUserEmail.setText(userEmail);&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            // Nếu chưa đăng nhập, hiển thị thông tin mặc định&#10;            if (tvUserName != null) {&#10;                tvUserName.setText(R.string.profile_user_name);&#10;            }&#10;            if (tvUserEmail != null) {&#10;                tvUserEmail.setText(R.string.profile_user_email);&#10;            }&#10;        }&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        if (btnEditProfile != null) {&#10;            btnEditProfile.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to edit profile screen&#10;                Toast.makeText(this, &quot;Chỉnh sửa hồ sơ&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (profileAvatar != null) {&#10;            profileAvatar.setOnClickListener(v -&gt; {&#10;                // TODO: Show avatar options (change photo, view photo)&#10;                Toast.makeText(this, &quot;Thay đổi ảnh đại diện&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuMyBookings != null) {&#10;            menuMyBookings.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to my bookings screen&#10;                Toast.makeText(this, &quot;Đặt chỗ của tôi&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuMyVehicles != null) {&#10;            menuMyVehicles.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to my vehicles screen&#10;                Toast.makeText(this, &quot;Quản lý xe của tôi&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuPaymentMethods != null) {&#10;            menuPaymentMethods.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to payment methods screen&#10;                Toast.makeText(this, &quot;Phương thức thanh toán&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuParkingHistory != null) {&#10;            menuParkingHistory.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to parking history screen&#10;                Toast.makeText(this, &quot;Lịch sử đỗ xe&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuSettings != null) {&#10;            menuSettings.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to settings screen&#10;                Toast.makeText(this, &quot;Cài đặt&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuHelpSupport != null) {&#10;            menuHelpSupport.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to help &amp; support screen&#10;                Toast.makeText(this, &quot;Trợ giúp &amp; Hỗ trợ&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuLogout != null) {&#10;            menuLogout.setOnClickListener(v -&gt; {&#10;                // TODO: Show logout confirmation dialog&#10;                handleLogout();&#10;            });&#10;        }&#10;    }&#10;&#10;    private void handleLogout() {&#10;        // Xóa thông tin user và token&#10;        try {&#10;            com.parkmate.android.utils.UserManager.getInstance().clearUserInfo();&#10;            com.parkmate.android.utils.TokenManager.getInstance().clearToken();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;&#10;        Toast.makeText(this, &quot;Đã đăng xuất&quot;, Toast.LENGTH_SHORT).show();&#10;&#10;        // Chuyển về màn hình đăng nhập và clear back stack&#10;        android.content.Intent intent = new android.content.Intent(this, LoginActivity.class);&#10;        intent.addFlags(android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP |&#10;                       android.content.Intent.FLAG_ACTIVITY_NEW_TASK |&#10;                       android.content.Intent.FLAG_ACTIVITY_CLEAR_TASK);&#10;        startActivity(intent);&#10;        finish();&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.os.Bundle;&#10;import android.widget.ImageButton;&#10;import android.widget.ImageView;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.constraintlayout.widget.ConstraintLayout;&#10;&#10;import com.parkmate.android.R;&#10;&#10;public class ProfileActivity extends BaseActivity {&#10;&#10;    private ImageButton btnBack;&#10;    private ImageButton btnEditProfile;&#10;    private ImageView profileAvatar;&#10;    private TextView tvUserName;&#10;    private TextView tvUserEmail;&#10;    private ConstraintLayout menuMyBookings;&#10;    private ConstraintLayout menuMyVehicles;&#10;    private ConstraintLayout menuPaymentMethods;&#10;    private ConstraintLayout menuParkingHistory;&#10;    private ConstraintLayout menuSettings;&#10;    private ConstraintLayout menuHelpSupport;&#10;    private ConstraintLayout menuLogout;&#10;&#10;    @Override&#10;    protected int getLayoutResourceId() {&#10;        return R.layout.activity_profile;&#10;    }&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;&#10;        // Setup toolbar without search&#10;        setupToolbar(false); // false = show back button&#10;&#10;        // Setup bottom navigation with Account tab selected&#10;        setupBottomNavigation(true, R.id.nav_account);&#10;&#10;        initProfileViews();&#10;        loadUserInfo(); // Load thông tin user đã đăng nhập&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initProfileViews() {&#10;        btnBack = findViewById(R.id.btnBack);&#10;        btnEditProfile = findViewById(R.id.btnEditProfile);&#10;        profileAvatar = findViewById(R.id.profileAvatar);&#10;        tvUserName = findViewById(R.id.tvUserName);&#10;        tvUserEmail = findViewById(R.id.tvUserEmail);&#10;        menuMyBookings = findViewById(R.id.menuMyBookings);&#10;        menuMyVehicles = findViewById(R.id.menuMyVehicles);&#10;        menuPaymentMethods = findViewById(R.id.menuPaymentMethods);&#10;        menuParkingHistory = findViewById(R.id.menuParkingHistory);&#10;        menuSettings = findViewById(R.id.menuSettings);&#10;        menuHelpSupport = findViewById(R.id.menuHelpSupport);&#10;        menuLogout = findViewById(R.id.menuLogout);&#10;&#10;        // Hide the btnBack since we're using toolbar navigation&#10;        if (btnBack != null) {&#10;            btnBack.setVisibility(android.view.View.GONE);&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Load thông tin user từ UserManager và hiển thị lên UI&#10;     */&#10;    private void loadUserInfo() {&#10;        try {&#10;            com.parkmate.android.utils.UserManager userManager = com.parkmate.android.utils.UserManager.getInstance();&#10;&#10;            // Hiển thị username thay vì name&#10;            String username = userManager.getUsername();&#10;            if (tvUserName != null &amp;&amp; username != null) {&#10;                tvUserName.setText(username);&#10;            } else if (tvUserName != null) {&#10;                // Fallback nếu không có username&#10;                tvUserName.setText(&quot;User&quot;);&#10;            }&#10;&#10;            // Hiển thị email user (giữ nguyên)&#10;            String userEmail = userManager.getUserEmail();&#10;            if (tvUserEmail != null &amp;&amp; userEmail != null) {&#10;                tvUserEmail.setText(userEmail);&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            // Nếu chưa đăng nhập, hiển thị thông tin mặc định&#10;            if (tvUserName != null) {&#10;                tvUserName.setText(R.string.profile_user_name);&#10;            }&#10;            if (tvUserEmail != null) {&#10;                tvUserEmail.setText(R.string.profile_user_email);&#10;            }&#10;        }&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        if (btnEditProfile != null) {&#10;            btnEditProfile.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to edit profile screen&#10;                Toast.makeText(this, &quot;Chỉnh sửa hồ sơ&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (profileAvatar != null) {&#10;            profileAvatar.setOnClickListener(v -&gt; {&#10;                // TODO: Show avatar options (change photo, view photo)&#10;                Toast.makeText(this, &quot;Thay đổi ảnh đại diện&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuMyBookings != null) {&#10;            menuMyBookings.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to my bookings screen&#10;                Toast.makeText(this, &quot;Đặt chỗ của tôi&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuMyVehicles != null) {&#10;            menuMyVehicles.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to my vehicles screen&#10;                Toast.makeText(this, &quot;Quản lý xe của tôi&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuPaymentMethods != null) {&#10;            menuPaymentMethods.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to payment methods screen&#10;                Toast.makeText(this, &quot;Phương thức thanh toán&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuParkingHistory != null) {&#10;            menuParkingHistory.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to parking history screen&#10;                Toast.makeText(this, &quot;Lịch sử đỗ xe&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuSettings != null) {&#10;            menuSettings.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to settings screen&#10;                Toast.makeText(this, &quot;Cài đặt&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuHelpSupport != null) {&#10;            menuHelpSupport.setOnClickListener(v -&gt; {&#10;                // TODO: Navigate to help &amp; support screen&#10;                Toast.makeText(this, &quot;Trợ giúp &amp; Hỗ trợ&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;&#10;        if (menuLogout != null) {&#10;            menuLogout.setOnClickListener(v -&gt; {&#10;                // TODO: Show logout confirmation dialog&#10;                handleLogout();&#10;            });&#10;        }&#10;    }&#10;&#10;    private void handleLogout() {&#10;        // Xóa thông tin user và token&#10;        try {&#10;            com.parkmate.android.utils.UserManager.getInstance().clearUserInfo();&#10;            com.parkmate.android.utils.TokenManager.getInstance().clearToken();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;&#10;        Toast.makeText(this, &quot;Đã đăng xuất&quot;, Toast.LENGTH_SHORT).show();&#10;&#10;        // Chuyển về màn hình đăng nhập và clear back stack&#10;        android.content.Intent intent = new android.content.Intent(this, LoginActivity.class);&#10;        intent.addFlags(android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP |&#10;                       android.content.Intent.FLAG_ACTIVITY_NEW_TASK |&#10;                       android.content.Intent.FLAG_ACTIVITY_CLEAR_TASK);&#10;        startActivity(intent);&#10;        finish();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java" />
              <option name="originalContent" value="package com.parkmate.android.activity;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.net.Uri;&#10;import android.os.Bundle;&#10;import android.provider.MediaStore;&#10;import android.text.Editable;&#10;import android.text.SpannableString;&#10;import android.text.Spanned;&#10;import android.text.TextWatcher;&#10;import android.text.method.LinkMovementMethod;&#10;import android.text.style.ClickableSpan;&#10;import android.text.style.ForegroundColorSpan;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.ArrayAdapter;&#10;import android.widget.AutoCompleteTextView;&#10;import android.widget.Button;&#10;import android.widget.CheckBox;&#10;import android.widget.EditText;&#10;import android.widget.FrameLayout;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.activity.result.ActivityResultLauncher;&#10;import androidx.activity.result.contract.ActivityResultContracts;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.appcompat.app.AlertDialog;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;import com.parkmate.android.model.request.RegisterRequest;&#10;import com.parkmate.android.model.response.ErrorResponse;&#10;import com.parkmate.android.model.response.OtpVerifyResponse;&#10;import com.parkmate.android.model.response.RegisterResponse;&#10;import com.parkmate.android.repository.AuthRepository;&#10;import com.google.gson.Gson;&#10;import retrofit2.HttpException;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.Calendar;&#10;import java.util.Locale;&#10;import java.util.regex.Pattern;&#10;&#10;import io.reactivex.rxjava3.android.schedulers.AndroidSchedulers;&#10;import io.reactivex.rxjava3.disposables.CompositeDisposable;&#10;import io.reactivex.rxjava3.schedulers.Schedulers;&#10;import android.os.CountDownTimer;&#10;import com.parkmate.android.utils.LoadingButton;&#10;import com.parkmate.android.utils.validation.RegisterValidator;&#10;&#10;public class RegisterActivity extends AppCompatActivity {&#10;&#10;    private static final String TAG = &quot;RegisterActivity&quot;;&#10;    // Added screen index constants to avoid magic numbers&#10;    private static final int SCREEN_BASIC_INFO = 0;&#10;    private static final int SCREEN_CCCD_INFO = 1;&#10;    private static final int SCREEN_CHECK_EMAIL = 2;&#10;    private static final int SCREEN_OTP = 3;&#10;    private static final int SCREEN_SUCCESS = 4;&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private TextInputEditText etFullName, etEmail, etPassword, etConfirmPassword;&#10;    private TextInputEditText etCccdNumber, etIdFullName, etDateOfBirth, etIssueDate, etIssuePlace;&#10;    private TextInputEditText etNationality, etPermanentAddress;&#10;    private AutoCompleteTextView actvGender;&#10;    private TextInputLayout tilDateOfBirth, tilIssueDate, tilGender;&#10;    private MaterialButton btnNext;&#10;    private Button btnContinue, btnVerify, btnLogin;&#10;    private ImageView ivBack, ivGoogleSignUp, ivFacebookSignUp;&#10;    private TextView tvLoginLink, tvUserEmail, tvResendCode;&#10;    private FrameLayout flFrontImage, flBackImage;&#10;    private ImageView ivFrontImage, ivBackImage;&#10;    private LinearLayout llFrontImagePlaceholder, llBackImagePlaceholder;&#10;    private CheckBox cbCommitment;&#10;&#10;    // OTP fields&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;&#10;    private Calendar calendar;&#10;    private SimpleDateFormat dateFormatter;&#10;    private Uri frontImageUri, backImageUri;&#10;    private String userEmail; // Store user email for OTP verification&#10;&#10;    // Activity result launchers for camera and gallery&#10;    private ActivityResultLauncher&lt;Intent&gt; frontCameraLauncher;&#10;    private ActivityResultLauncher&lt;Intent&gt; backCameraLauncher;&#10;&#10;    private CompositeDisposable compositeDisposable = new CompositeDisposable();&#10;    private static final Pattern USERNAME_ALLOWED = Pattern.compile(&quot;^[A-Za-z0-9_-]+$&quot;);&#10;    private AuthRepository authRepository;&#10;    private CountDownTimer resendTimer;&#10;    private static final long RESEND_OTP_INTERVAL_MS = 60000L;&#10;    private LoadingButton loadingButtonContinue;&#10;    private LoadingButton loadingButtonVerify;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_register);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Khởi tạo Calendar và định dạng ngày tháng&#10;        calendar = Calendar.getInstance();&#10;        dateFormatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;&#10;        // Khởi tạo ActivityResultLauncher cho chụp ảnh&#10;        setupImageCaptureLaunchers();&#10;&#10;        authRepository = new AuthRepository();&#10;        initViews();&#10;        setupGenderDropdown();&#10;        setupListeners();&#10;        setupLoginLink();&#10;        setupDatePickers();&#10;        setupImageCapture();&#10;    }&#10;&#10;    private void setupImageCaptureLaunchers() {&#10;        // Launcher cho hình ảnh mặt trước CCCD&#10;        frontCameraLauncher = registerForActivityResult(&#10;                new ActivityResultContracts.StartActivityForResult(),&#10;                result -&gt; {&#10;                    if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                        // Xử lý hình ảnh được chụp&#10;                        Bundle extras = result.getData().getExtras();&#10;                        if (extras != null) {&#10;                            Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                            if (imageUri != null) {&#10;                                frontImageUri = imageUri;&#10;                                ivFrontImage.setImageURI(frontImageUri);&#10;                                ivFrontImage.setVisibility(View.VISIBLE);&#10;                                llFrontImagePlaceholder.setVisibility(View.GONE);&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;        );&#10;&#10;        // Launcher cho hình ảnh mặt sau CCCD&#10;        backCameraLauncher = registerForActivityResult(&#10;                new ActivityResultContracts.StartActivityForResult(),&#10;                result -&gt; {&#10;                    if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                        // Xử lý hình ảnh được chụp&#10;                        Bundle extras = result.getData().getExtras();&#10;                        if (extras != null) {&#10;                            Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                            if (imageUri != null) {&#10;                                backImageUri = imageUri;&#10;                                ivBackImage.setImageURI(backImageUri);&#10;                                ivBackImage.setVisibility(View.VISIBLE);&#10;                                llBackImagePlaceholder.setVisibility(View.GONE);&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;        );&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;&#10;        // Ánh xạ các view từ layout đầu tiên (Thông tin cơ bản)&#10;        etFullName = findViewById(R.id.etFullName);&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        etConfirmPassword = findViewById(R.id.etConfirmPassword);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        ivGoogleSignUp = findViewById(R.id.ivGoogleSignUp);&#10;        ivFacebookSignUp = findViewById(R.id.ivFacebookSignUp);&#10;        tvLoginLink = findViewById(R.id.tvLoginLink);&#10;&#10;        // Ánh xạ các view từ layout thứ hai (Thông tin CCCD)&#10;        etCccdNumber = findViewById(R.id.etCccdNumber);&#10;        etIdFullName = findViewById(R.id.etIdFullName);&#10;        etDateOfBirth = findViewById(R.id.etDateOfBirth);&#10;        etIssueDate = findViewById(R.id.etIssueDate);&#10;        etIssuePlace = findViewById(R.id.etIssuePlace);&#10;        tilDateOfBirth = findViewById(R.id.tilDateOfBirth);&#10;        tilIssueDate = findViewById(R.id.tilIssueDate);&#10;&#10;        // Ánh xạ các trường mới được thêm vào&#10;        actvGender = findViewById(R.id.actvGender);&#10;        tilGender = findViewById(R.id.tilGender);&#10;        etNationality = findViewById(R.id.etNationality);&#10;        etPermanentAddress = findViewById(R.id.etPermanentAddress);&#10;&#10;        // Ánh xạ nút &quot;Tiếp tục&quot; trong layout CCCD info&#10;        btnContinue = findViewById(R.id.btnContinue);&#10;&#10;        // Ánh xạ nút quay lại dưới dạng mũi tên&#10;        ivBack = findViewById(R.id.ivBack);&#10;&#10;        // Ánh xạ các view cho hình ảnh&#10;        flFrontImage = findViewById(R.id.flFrontImage);&#10;        flBackImage = findViewById(R.id.flBackImage);&#10;        ivFrontImage = findViewById(R.id.ivFrontImage);&#10;        ivBackImage = findViewById(R.id.ivBackImage);&#10;        llFrontImagePlaceholder = findViewById(R.id.llFrontImagePlaceholder);&#10;        llBackImagePlaceholder = findViewById(R.id.llBackImagePlaceholder);&#10;&#10;        // Ánh xạ checkbox cam kết&#10;        cbCommitment = findViewById(R.id.cbCommitment);&#10;    }&#10;&#10;    private void setupGenderDropdown() {&#10;        // Thiết lập dropdown cho lựa chọn giới tính&#10;        String[] genderOptions = {&quot;Nam&quot;, &quot;Nữ&quot;, &quot;Khác&quot;};&#10;        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(&#10;                this,&#10;                android.R.layout.simple_dropdown_item_1line,&#10;                genderOptions&#10;        );&#10;        if (actvGender != null) {&#10;            actvGender.setAdapter(adapter);&#10;        }&#10;    }&#10;&#10;    private void setupImageCapture() {&#10;        // Thiết lập sự kiện khi nhấn vào khung chụp ảnh&#10;        if (flFrontImage != null) {&#10;            flFrontImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    frontCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                            &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                            Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;&#10;        if (flBackImage != null) {&#10;            flBackImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    backCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                            &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                            Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupListeners() {&#10;        ivBack.setOnClickListener(v -&gt; {&#10;            if (viewFlipper.getDisplayedChild() &gt; 0) {&#10;                viewFlipper.showPrevious();&#10;            } else {&#10;                finish();&#10;            }&#10;        });&#10;&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            if (validateBasicInfo()) {&#10;                if (etIdFullName != null &amp;&amp; etFullName != null) {&#10;                    etIdFullName.setText(etFullName.getText().toString().trim());&#10;                }&#10;                viewFlipper.setDisplayedChild(SCREEN_CCCD_INFO);&#10;            }&#10;        });&#10;&#10;        if (btnContinue != null) {&#10;            btnContinue.setOnClickListener(v -&gt; {&#10;                if (validateCccdInfo()) {&#10;                    userEmail = etEmail.getText().toString().trim();&#10;                    // CHỈ chuyển sang màn Check Email, CHƯA gửi OTP ở bước này&#10;                    viewFlipper.setDisplayedChild(SCREEN_CHECK_EMAIL);&#10;                    setupCheckEmailScreen();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupCheckEmailScreen() {&#10;        View checkEmailView = viewFlipper.getChildAt(SCREEN_CHECK_EMAIL);&#10;        if (checkEmailView == null) {&#10;            Log.e(TAG, &quot;Check Email view is null at index &quot; + SCREEN_CHECK_EMAIL);&#10;            return;&#10;        }&#10;        TextView tvTitle = checkEmailView.findViewById(R.id.tvTitle);&#10;        TextView tvDescription = checkEmailView.findViewById(R.id.tvDescription);&#10;        tvUserEmail = checkEmailView.findViewById(R.id.tvUserEmail);&#10;        Button btnEmailContinue = checkEmailView.findViewById(R.id.btnContinue);&#10;&#10;        if (tvTitle != null) tvTitle.setText(R.string.register_check_email);&#10;        if (tvDescription != null) tvDescription.setText(R.string.register_check_email_description);&#10;        if (tvUserEmail != null) tvUserEmail.setText(userEmail);&#10;&#10;        if (btnEmailContinue != null) {&#10;            // Khởi tạo LoadingButton cho nút Continue&#10;            loadingButtonContinue = new LoadingButton(btnEmailContinue);&#10;&#10;            btnEmailContinue.setOnClickListener(v -&gt; {&#10;                // Gọi register tại đây để BE gửi OTP (không tự gửi OTP thủ công nữa)&#10;                loadingButtonContinue.showLoading(&quot;Đang đăng ký...&quot;);&#10;                performRegisterForOtp();&#10;            });&#10;        }&#10;    }&#10;&#10;    // Đăng ký để backend gửi OTP – sau thành công chuyển sang màn hình OTP&#10;    private void performRegisterForOtp() {&#10;        RegisterRequest request = buildRegisterRequest();&#10;        compositeDisposable.add(&#10;                authRepository.register(request)&#10;                        .subscribeOn(Schedulers.io())&#10;                        .observeOn(AndroidSchedulers.mainThread())&#10;                        .subscribe(&#10;                                resp -&gt; {&#10;                                    if (loadingButtonContinue != null) loadingButtonContinue.hideLoading();&#10;                                    // Lưu token (nếu có) trước khi chuyển sang OTP&#10;                                    storeRegisterToken(resp);&#10;                                    Toast.makeText(this, &quot;OTP đã được gửi tới email&quot;, Toast.LENGTH_SHORT).show();&#10;                                    viewFlipper.setDisplayedChild(SCREEN_OTP);&#10;                                    setupOtpScreen();&#10;                                },&#10;                                err -&gt; {&#10;                                    if (loadingButtonContinue != null) loadingButtonContinue.hideLoading();&#10;                                    if (tryHandleAccountExists(err)) return; // nếu đã xử lý dialog thì dừng&#10;                                    boolean handled = parseAndApplyBackendErrors(err);&#10;                                    if (!handled) {&#10;                                        String msg = err.getMessage();&#10;                                        if (msg == null) msg = &quot;Đăng ký thất bại&quot;;&#10;                                        Toast.makeText(this, msg, Toast.LENGTH_LONG).show();&#10;                                    }&#10;                                }&#10;                        )&#10;        );&#10;    }&#10;&#10;    private void storeRegisterToken(RegisterResponse resp) {&#10;        if (resp == null) return;&#10;        String rawToken = resp.getAnyToken();&#10;        if (rawToken == null || rawToken.isEmpty()) {&#10;            Log.w(TAG, &quot;Register response không có token để lưu (có thể backend không yêu cầu Authorization cho verify hoặc đang thiếu spec)&quot;);&#10;            return;&#10;        }&#10;        String cleaned = rawToken.startsWith(&quot;Bearer &quot;) ? rawToken.substring(7) : rawToken;&#10;        try {&#10;            com.parkmate.android.utils.TokenManager.getInstance().saveToken(cleaned);&#10;            Log.d(TAG, &quot;Đã lưu token đăng ký (length=&quot; + cleaned.length() + &quot;)&quot;);&#10;        } catch (IllegalStateException e) {&#10;            Log.e(TAG, &quot;TokenManager chưa init. Cần gọi TokenManager.init(context) trong Application hoặc SplashActivity trước.&quot;, e);&#10;        }&#10;    }&#10;&#10;    // Thử parse lỗi account exists&#10;    private boolean tryHandleAccountExists(Throwable t) {&#10;        if (!(t instanceof HttpException)) return false;&#10;        try {&#10;            HttpException httpEx = (HttpException) t;&#10;            String body = httpEx.response() != null &amp;&amp; httpEx.response().errorBody() != null ? httpEx.response().errorBody().string() : null;&#10;            if (body == null || body.isEmpty()) return false;&#10;            ErrorResponse er = new Gson().fromJson(body, ErrorResponse.class);&#10;            if ( er == null || er.getError() == null ) return false;&#10;            String code = er.getError().getCode();&#10;            if (&quot;ACCOUNT_ALREADY_EXISTS&quot;.equalsIgnoreCase(code)) {&#10;                showEmailExistsDialog(userEmail, er);&#10;                return true;&#10;            }&#10;        } catch (Exception e) {&#10;            Log.e(TAG, &quot;Parse ACCOUNT_ALREADY_EXISTS failed&quot;, e);&#10;        }&#10;        return false;&#10;    }&#10;&#10;    private void showEmailExistsDialog(String email, ErrorResponse er) {&#10;        if (etEmail != null) etEmail.setError(getString(R.string.error_email_exists));&#10;        String detail = getString(R.string.error_email_exists_detail, email);&#10;        new AlertDialog.Builder(this)&#10;                .setTitle(R.string.error_email_exists)&#10;                .setMessage(detail)&#10;                .setCancelable(false)&#10;                .setPositiveButton(R.string.action_login_now, (d, which) -&gt; {&#10;                    startActivity(new Intent(this, LoginActivity.class));&#10;                    finish();&#10;                })&#10;                .setNegativeButton(R.string.action_use_other_email, (d, w) -&gt; {&#10;                    viewFlipper.setDisplayedChild(SCREEN_BASIC_INFO);&#10;                    if (etEmail != null) {&#10;                        etEmail.requestFocus();&#10;                        etEmail.selectAll();&#10;                    }&#10;                })&#10;                .setNeutralButton(R.string.action_forgot_password, (d, w) -&gt; {&#10;                    Intent i = new Intent(this, ForgotPasswordActivity.class);&#10;                    i.putExtra(&quot;email_prefill&quot;, email);&#10;                    startActivity(i);&#10;                })&#10;                .show();&#10;    }&#10;&#10;    private void setupOtpScreen() {&#10;        View otpView = viewFlipper.getChildAt(SCREEN_OTP);&#10;        if (otpView == null) {&#10;            Log.e(TAG, &quot;OTP view is null at index &quot; + SCREEN_OTP);&#10;            return;&#10;        }&#10;        TextView tvTitle = otpView.findViewById(R.id.tvTitle);&#10;        TextView tvDescription = otpView.findViewById(R.id.tvDescription);&#10;        etOtp1 = otpView.findViewById(R.id.etOtp1);&#10;        etOtp2 = otpView.findViewById(R.id.etOtp2);&#10;        etOtp3 = otpView.findViewById(R.id.etOtp3);&#10;        etOtp4 = otpView.findViewById(R.id.etOtp4);&#10;        etOtp5 = otpView.findViewById(R.id.etOtp5);&#10;        etOtp6 = otpView.findViewById(R.id.etOtp6);&#10;        tvResendCode = otpView.findViewById(R.id.tvResendCode);&#10;        btnVerify = otpView.findViewById(R.id.btnVerify);&#10;&#10;        if (tvTitle != null) tvTitle.setText(R.string.register_enter_otp);&#10;        if (tvDescription != null) tvDescription.setText(R.string.register_otp_description);&#10;&#10;        setupOtpTextWatchers();&#10;        startResendCountdown();&#10;&#10;        if (btnVerify != null) {&#10;            // Khởi tạo LoadingButton cho nút Verify&#10;            loadingButtonVerify = new LoadingButton(btnVerify);&#10;&#10;            btnVerify.setOnClickListener(v -&gt; {&#10;                if (validateOTP()) {&#10;                    String otp = collectOtp();&#10;                    verifyOtpOnly(otp);&#10;                }&#10;            });&#10;        }&#10;        if (tvResendCode != null) {&#10;            tvResendCode.setOnClickListener(v -&gt; {&#10;                if (tvResendCode.isEnabled()) {&#10;                    // Trường hợp BE có endpoint resend OTP riêng -&gt; TODO sau&#10;                    Toast.makeText(this, &quot;Yêu cầu gửi lại OTP (cần implement API)&quot;, Toast.LENGTH_SHORT).show();&#10;                    startResendCountdown();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    // Chỉ verify OTP (không gọi register nữa)&#10;    private void verifyOtpOnly(String otp) {&#10;        loadingButtonVerify.showLoading(&quot;Đang xác thực...&quot;);&#10;        compositeDisposable.add(&#10;                authRepository.verifyOtp(userEmail, otp)&#10;                        .subscribeOn(Schedulers.io())&#10;                        .observeOn(AndroidSchedulers.mainThread())&#10;                        .subscribe(&#10;                                this::onOtpVerifiedSuccess,&#10;                                this::onOtpVerifyFailedFinal&#10;                        )&#10;        );&#10;    }&#10;&#10;    private void onOtpVerifiedSuccess(OtpVerifyResponse resp) {&#10;        if (loadingButtonVerify != null) loadingButtonVerify.hideLoading();&#10;        boolean ok = resp != null &amp;&amp; Boolean.TRUE.equals(resp.getSuccess());&#10;        Log.d(TAG, &quot;OTP verify response successFlag=&quot; + ok + &quot;, message=&quot; + (resp == null ? &quot;null&quot; : resp.getMessage()));&#10;        if (!ok) {&#10;            String msg = resp != null &amp;&amp; resp.getMessage() != null ? resp.getMessage() : &quot;Xác thực OTP không thành công&quot;;&#10;            Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();&#10;            // Highlight first OTP box as error hint&#10;            if (etOtp1 != null) etOtp1.setError(msg);&#10;            return;&#10;        }&#10;        // OTP ok -&gt; sang success&#10;        viewFlipper.setDisplayedChild(SCREEN_SUCCESS);&#10;        setupSuccessScreen();&#10;        Toast.makeText(this, resp.getMessage() != null ? resp.getMessage() : &quot;Xác thực thành công&quot;, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void onOtpVerifyFailedFinal(Throwable throwable) {&#10;        if (loadingButtonVerify != null) loadingButtonVerify.hideLoading();&#10;        Log.e(TAG, &quot;OTP verify failed raw: &quot; + throwable.getMessage(), throwable);&#10;        boolean handled = parseAndApplyBackendErrors(throwable);&#10;        if (!handled) {&#10;            Toast.makeText(this, &quot;Xác thực OTP thất bại&quot;, Toast.LENGTH_SHORT).show();&#10;        }&#10;    }&#10;&#10;    private void setupSuccessScreen() {&#10;        View successView = viewFlipper.getChildAt(SCREEN_SUCCESS);&#10;        if (successView == null) {&#10;            Log.e(TAG, &quot;Success view is null at index &quot; + SCREEN_SUCCESS);&#10;            return;&#10;        }&#10;        TextView tvSuccessTitle = successView.findViewById(R.id.tvTitle);&#10;        TextView tvSuccessDescription = successView.findViewById(R.id.tvDescription);&#10;        btnLogin = successView.findViewById(R.id.btnLogin);&#10;&#10;        if (tvSuccessTitle != null) tvSuccessTitle.setText(R.string.registration_success);&#10;        if (tvSuccessDescription != null) tvSuccessDescription.setText(R.string.registration_success_description);&#10;&#10;        if (btnLogin != null) {&#10;            btnLogin.setOnClickListener(v -&gt; {&#10;                startActivity(new Intent(this, LoginActivity.class));&#10;                finish();&#10;            });&#10;        }&#10;    }&#10;&#10;    // ==== Refactor validateBasicInfo dùng RegisterValidator ====&#10;    private boolean validateBasicInfo() {&#10;        String fullName = safeText(etFullName);&#10;        String email = safeText(etEmail);&#10;        String password = safeText(etPassword);&#10;        String confirmPassword = safeText(etConfirmPassword);&#10;        String generatedUsername = generateUsername(email, fullName);&#10;        var errors = RegisterValidator.validateBasic(fullName, email, password, confirmPassword, generatedUsername);&#10;        // Clear lỗi cũ&#10;        clearBasicErrors();&#10;        if (errors.isEmpty()) return true;&#10;        for (var e : errors.entrySet()) {&#10;            switch (e.getKey()) {&#10;                case &quot;fullName&quot;: if (etFullName != null) etFullName.setError(e.getValue()); break;&#10;                case &quot;email&quot;: if (etEmail != null) etEmail.setError(e.getValue()); break;&#10;                case &quot;password&quot;: if (etPassword != null) etPassword.setError(e.getValue()); break;&#10;                case &quot;confirmPassword&quot;: if (etConfirmPassword != null) etConfirmPassword.setError(e.getValue()); break;&#10;                case &quot;username&quot;: if (etEmail != null) etEmail.setError(e.getValue()); break;&#10;            }&#10;        }&#10;        return false;&#10;    }&#10;&#10;    private void clearBasicErrors() {&#10;        if (etFullName != null) etFullName.setError(null);&#10;        if (etEmail != null) etEmail.setError(null);&#10;        if (etPassword != null) etPassword.setError(null);&#10;        if (etConfirmPassword != null) etConfirmPassword.setError(null);&#10;    }&#10;&#10;    private boolean validateCccdInfo() {&#10;        String cccdNumber = safeText(etCccdNumber);&#10;        String idFullName = safeText(etIdFullName);&#10;        String dateOfBirth = safeText(etDateOfBirth);&#10;        String issueDate = safeText(etIssueDate);&#10;        String issuePlace = safeText(etIssuePlace);&#10;        String gender = actvGender != null ? actvGender.getText().toString().trim() : &quot;&quot;;&#10;        String nationality = safeText(etNationality);&#10;        String permanentAddress = safeText(etPermanentAddress);&#10;        boolean commitment = cbCommitment != null &amp;&amp; cbCommitment.isChecked();&#10;        var errors = RegisterValidator.validateCccd(cccdNumber, idFullName, dateOfBirth, issueDate, issuePlace, gender, nationality, permanentAddress, commitment);&#10;        clearCccdErrors();&#10;        if (errors.isEmpty()) return true;&#10;        for (var e : errors.entrySet()) {&#10;            switch (e.getKey()) {&#10;                case &quot;cccdNumber&quot;: if (etCccdNumber != null) etCccdNumber.setError(e.getValue()); break;&#10;                case &quot;idFullName&quot;: if (etIdFullName != null) etIdFullName.setError(e.getValue()); break;&#10;                case &quot;dateOfBirth&quot;: if (etDateOfBirth != null) etDateOfBirth.setError(e.getValue()); break;&#10;                case &quot;gender&quot;: if (actvGender != null) actvGender.setError(e.getValue()); break;&#10;                case &quot;nationality&quot;: if (etNationality != null) etNationality.setError(e.getValue()); break;&#10;                case &quot;permanentAddress&quot;: if (etPermanentAddress != null) etPermanentAddress.setError(e.getValue()); break;&#10;                case &quot;issueDate&quot;: if (etIssueDate != null) etIssueDate.setError(e.getValue()); break;&#10;                case &quot;issuePlace&quot;: if (etIssuePlace != null) etIssuePlace.setError(e.getValue()); break;&#10;                case &quot;commitment&quot;: Toast.makeText(this, e.getValue(), Toast.LENGTH_SHORT).show(); break;&#10;            }&#10;        }&#10;        return false;&#10;    }&#10;&#10;    private void clearCccdErrors() {&#10;        if (etCccdNumber != null) etCccdNumber.setError(null);&#10;        if (etIdFullName != null) etIdFullName.setError(null);&#10;        if (etDateOfBirth != null) etDateOfBirth.setError(null);&#10;        if (etIssueDate != null) etIssueDate.setError(null);&#10;        if (etIssuePlace != null) etIssuePlace.setError(null);&#10;        if (actvGender != null) actvGender.setError(null);&#10;        if (etNationality != null) etNationality.setError(null);&#10;        if (etPermanentAddress != null) etPermanentAddress.setError(null);&#10;    }&#10;&#10;    // =================== HELPER METHODS KHÔI PHỤC (BỊ THIẾU) ===================&#10;    private void sendOTPToEmail(String email) {&#10;        // TODO: Gọi API gửi OTP thực tế – hiện chỉ hiển thị thông báo&#10;        Toast.makeText(this, &quot;Đã gửi mã OTP đến: &quot; + email, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void setupOtpTextWatchers() {&#10;        if (etOtp1 == null) return;&#10;        etOtp1.addTextChangedListener(new OTPTextWatcher(etOtp1, etOtp2));&#10;        etOtp2.addTextChangedListener(new OTPTextWatcher(etOtp2, etOtp3));&#10;        etOtp3.addTextChangedListener(new OTPTextWatcher(etOtp3, etOtp4));&#10;        etOtp4.addTextChangedListener(new OTPTextWatcher(etOtp4, etOtp5));&#10;        etOtp5.addTextChangedListener(new OTPTextWatcher(etOtp5, etOtp6));&#10;        etOtp6.addTextChangedListener(new OTPTextWatcher(etOtp6, null));&#10;    }&#10;&#10;    private void startResendCountdown() {&#10;        if (tvResendCode == null) return;&#10;        tvResendCode.setEnabled(false);&#10;        if (resendTimer != null) resendTimer.cancel();&#10;        resendTimer = new CountDownTimer(RESEND_OTP_INTERVAL_MS, 1000) {&#10;            @Override public void onTick(long millisUntilFinished) {&#10;                long sec = millisUntilFinished / 1000;&#10;                tvResendCode.setText(&quot;Gửi lại mã (&quot; + sec + &quot;s)&quot;);&#10;            }&#10;            @Override public void onFinish() {&#10;                tvResendCode.setEnabled(true);&#10;                tvResendCode.setText(getString(R.string.resend_code));&#10;            }&#10;        }.start();&#10;    }&#10;&#10;    private boolean validateOTP() {&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || etOtp4 == null || etOtp5 == null || etOtp6 == null)&#10;            return false;&#10;        if (safeText(etOtp1).isEmpty() || safeText(etOtp2).isEmpty() || safeText(etOtp3).isEmpty() ||&#10;                safeText(etOtp4).isEmpty() || safeText(etOtp5).isEmpty() || safeText(etOtp6).isEmpty()) {&#10;            Toast.makeText(this, &quot;Vui lòng nhập đầy đủ mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private String collectOtp() {&#10;        return safeText(etOtp1) + safeText(etOtp2) + safeText(etOtp3) + safeText(etOtp4) + safeText(etOtp5) + safeText(etOtp6);&#10;    }&#10;&#10;    private RegisterRequest buildRegisterRequest() {&#10;        String fullName = safeText(etFullName);&#10;        String email = safeText(etEmail);&#10;        String password = safeText(etPassword);&#10;        String cccdNumber = safeText(etCccdNumber); // idNumber&#10;        String permanentAddress = safeText(etPermanentAddress); // address&#10;        String dateOfBirthUi = safeText(etDateOfBirth); // dd/MM/yyyy&#10;&#10;        String[] nameParts = splitName(fullName);&#10;        String firstName = nameParts[0];&#10;        String lastName = nameParts[1];&#10;        String dateOfBirthIso = formatDobToIso(dateOfBirthUi);&#10;        String username = generateUsername(email, fullName);&#10;&#10;        String phone = &quot;0000000000&quot;; // TODO: field thực tế&#10;        String frontPhotoPath = null; // TODO: upload để lấy path&#10;        String backPhotoPath = null;  // TODO: upload để lấy path&#10;&#10;        return new RegisterRequest(&#10;                email,&#10;                username,&#10;                password,&#10;                phone,&#10;                firstName,&#10;                lastName,&#10;                cccdNumber,&#10;                dateOfBirthIso,&#10;                permanentAddress,&#10;                frontPhotoPath,&#10;                backPhotoPath&#10;        );&#10;    }&#10;&#10;    private String safeText(EditText et) {&#10;        return et == null || et.getText() == null ? &quot;&quot; : et.getText().toString().trim();&#10;    }&#10;&#10;    private String[] splitName(String fullName) {&#10;        if (fullName == null || fullName.isEmpty()) return new String[]{&quot;&quot;, &quot;&quot;};&#10;        String[] parts = fullName.trim().split(&quot;\\s+&quot;);&#10;        if (parts.length == 1) return new String[]{parts[0], parts[0]};&#10;        StringBuilder first = new StringBuilder();&#10;        for (int i = 0; i &lt; parts.length - 1; i++) {&#10;            if (i &gt; 0) first.append(&quot; &quot;);&#10;            first.append(parts[i]);&#10;        }&#10;        String last = parts[parts.length - 1];&#10;        return new String[]{first.toString(), last};&#10;    }&#10;&#10;    private String formatDobToIso(String dobUi) {&#10;        if (dobUi == null || dobUi.isEmpty()) return &quot;1990-01-01T00:00:00&quot;; // fallback&#10;        try {&#10;            SimpleDateFormat uiFmt = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            SimpleDateFormat isoFmt = new SimpleDateFormat(&quot;yyyy-MM-dd'T'00:00:00&quot;, Locale.getDefault());&#10;            return isoFmt.format(uiFmt.parse(dobUi));&#10;        } catch (Exception e) {&#10;            return &quot;1990-01-01T00:00:00&quot;;&#10;        }&#10;    }&#10;&#10;    private String generateUsername(String email, String fullName) {&#10;        String base = null;&#10;        if (email != null &amp;&amp; email.contains(&quot;@&quot;)) base = email.substring(0, email.indexOf('@'));&#10;        if (base == null || base.isEmpty()) {&#10;            base = fullName == null ? &quot;&quot; : fullName.trim().replaceAll(&quot;\\s+&quot;, &quot;-&quot;).toLowerCase(Locale.getDefault());&#10;        }&#10;        base = base.replaceAll(&quot;[^A-Za-z0-9_-]&quot;, &quot;_&quot;)&#10;                   .replaceAll(&quot;_+&quot;, &quot;_&quot;);&#10;        if (base.isEmpty()) base = &quot;user&quot; + System.currentTimeMillis();&#10;        if (base.length() &gt; 30) base = base.substring(0, 30);&#10;        return base;&#10;    }&#10;&#10;    // Map field error from backend to the appropriate UI element&#10;    private void applyFieldError(ErrorResponse.FieldError fe) {&#10;        if (fe == null) return;&#10;        String field = fe.getField();&#10;        String msg = fe.getMessage() != null ? fe.getMessage() : &quot;Giá trị không hợp lệ&quot;;&#10;        if (field == null) {&#10;            if (etOtp1 != null) etOtp1.setError(msg);&#10;            return;&#10;        }&#10;        switch (field) {&#10;            case &quot;email&quot;:&#10;                if (etEmail != null) etEmail.setError(msg);&#10;                break;&#10;            case &quot;username&quot;:&#10;                // Hiện chưa có ô riêng username -&gt; reuse email cho cảnh báo&#10;                if (etEmail != null) etEmail.setError(msg);&#10;                break;&#10;            case &quot;password&quot;:&#10;                if (etPassword != null) etPassword.setError(msg);&#10;                break;&#10;            case &quot;confirmPassword&quot;:&#10;                if (etConfirmPassword != null) etConfirmPassword.setError(msg);&#10;                break;&#10;            case &quot;idNumber&quot;:&#10;            case &quot;cccdNumber&quot;:&#10;                if (etCccdNumber != null) etCccdNumber.setError(msg);&#10;                break;&#10;            case &quot;firstName&quot;:&#10;            case &quot;lastName&quot;:&#10;                if (etFullName != null) etFullName.setError(msg);&#10;                break;&#10;            case &quot;dateOfBirth&quot;:&#10;                if (etDateOfBirth != null) etDateOfBirth.setError(msg);&#10;                break;&#10;            case &quot;issueDate&quot;:&#10;                if (etIssueDate != null) etIssueDate.setError(msg);&#10;                break;&#10;            case &quot;issuePlace&quot;:&#10;                if (etIssuePlace != null) etIssuePlace.setError(msg);&#10;                break;&#10;            case &quot;gender&quot;:&#10;                if (actvGender != null) actvGender.setError(msg);&#10;                break;&#10;            case &quot;nationality&quot;:&#10;                if (etNationality != null) etNationality.setError(msg);&#10;                break;&#10;            case &quot;address&quot;:&#10;            case &quot;permanentAddress&quot;:&#10;                if (etPermanentAddress != null) etPermanentAddress.setError(msg);&#10;                break;&#10;            case &quot;otp&quot;:&#10;            default:&#10;                if (etOtp1 != null) etOtp1.setError(msg);&#10;                break;&#10;        }&#10;    }&#10;&#10;    private boolean parseAndApplyBackendErrors(Throwable t) {&#10;        if (!(t instanceof HttpException)) return false;&#10;        HttpException httpEx = (HttpException) t;&#10;        try {&#10;            String body = httpEx.response() != null &amp;&amp; httpEx.response().errorBody() != null&#10;                    ? httpEx.response().errorBody().string() : null;&#10;            Log.e(TAG, &quot;HTTP &quot; + httpEx.code() + &quot; OTP error body: &quot; + body);&#10;            if (body == null || body.isEmpty()) return false;&#10;            Gson gson = new Gson();&#10;            ErrorResponse er = gson.fromJson(body, ErrorResponse.class);&#10;            if (er == null || er.getError() == null) return false;&#10;&#10;            // Field errors first&#10;            if (er.getError().getFieldErrors() != null &amp;&amp; !er.getError().getFieldErrors().isEmpty()) {&#10;                for (ErrorResponse.FieldError fe : er.getError().getFieldErrors()) {&#10;                    applyFieldError(fe);&#10;                }&#10;                if (er.getMessage() != null) {&#10;                    Toast.makeText(this, er.getMessage(), Toast.LENGTH_SHORT).show();&#10;                }&#10;                return true;&#10;            }&#10;&#10;            String code = er.getError().getCode();&#10;            if (code != null) {&#10;                switch (code) {&#10;                    case &quot;UNCATEGORIZED_EXCEPTION&quot;:&#10;                        Toast.makeText(this, &quot;Hệ thống đang bận hoặc gặp sự cố. Vui lòng thử lại sau.&quot;, Toast.LENGTH_LONG).show();&#10;                        Log.e(TAG, &quot;Server uncategorized exception: &quot; + er.getMessage());&#10;                        return true;&#10;                    case &quot;ACCOUNT_ALREADY_EXISTS&quot;:&#10;                        showEmailExistsDialog(userEmail, er);&#10;                        return true;&#10;                    case &quot;INVALID_OTP&quot;:&#10;                    case &quot;OTP_INVALID&quot;:&#10;                        showOtpInlineError(er.getMessage() != null ? er.getMessage() : &quot;Mã OTP không hợp lệ&quot;);&#10;                        return true;&#10;                    case &quot;OTP_EXPIRED&quot;:&#10;                        showOtpInlineError(er.getMessage() != null ? er.getMessage() : &quot;Mã OTP đã hết hạn, vui lòng yêu cầu mã mới&quot;);&#10;                        return true;&#10;                    default:&#10;                        if (er.getMessage() != null) {&#10;                            Toast.makeText(this, er.getMessage(), Toast.LENGTH_SHORT).show();&#10;                            return true;&#10;                        }&#10;                }&#10;            }&#10;            return false;&#10;        } catch (Exception e) {&#10;            Log.e(TAG, &quot;Parse backend error fail&quot;, e);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    private void showOtpInlineError(String msg) {&#10;        if (etOtp1 != null) etOtp1.setError(msg);&#10;        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();&#10;    }&#10;    // ================= END HELPER METHODS ======================&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        if (resendTimer != null) resendTimer.cancel();&#10;        compositeDisposable.clear();&#10;        super.onDestroy();&#10;    }&#10;&#10;    // Inner class for OTP text change handling&#10;    private class OTPTextWatcher implements TextWatcher {&#10;        private EditText currentEditText;&#10;        private EditText nextEditText;&#10;&#10;        public OTPTextWatcher(EditText currentEditText, EditText nextEditText) {&#10;            this.currentEditText = currentEditText;&#10;            this.nextEditText = nextEditText;&#10;        }&#10;&#10;        @Override&#10;        public void beforeTextChanged(CharSequence s, int start, int count, int after) {&#10;        }&#10;&#10;        @Override&#10;        public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;        }&#10;&#10;        @Override&#10;        public void afterTextChanged(Editable s) {&#10;            if (s.length() == 1 &amp;&amp; nextEditText != null) {&#10;                nextEditText.requestFocus();&#10;            }&#10;        }&#10;    }&#10;&#10;    // === Khôi phục hàm setupLoginLink &amp; setupDatePickers (bị thiếu) ===&#10;    private void setupLoginLink() {&#10;        if (tvLoginLink == null) return;&#10;        String text = &quot;Đã có tài khoản? Đăng nhập&quot;;&#10;        SpannableString ss = new SpannableString(text);&#10;        int start = text.indexOf(&quot;Đăng nhập&quot;);&#10;        int end = start + &quot;Đăng nhập&quot;.length();&#10;        ss.setSpan(new ClickableSpan() {&#10;            @Override&#10;            public void onClick(View widget) {&#10;                startActivity(new Intent(RegisterActivity.this, LoginActivity.class));&#10;                finish();&#10;            }&#10;        }, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        ss.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.colorPrimary)), start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        tvLoginLink.setText(ss);&#10;        tvLoginLink.setMovementMethod(LinkMovementMethod.getInstance());&#10;    }&#10;&#10;    private void setupDatePickers() {&#10;        if (etDateOfBirth != null) {&#10;            etDateOfBirth.setOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            if (tilDateOfBirth != null) {&#10;                tilDateOfBirth.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            }&#10;        }&#10;        if (etIssueDate != null) {&#10;            etIssueDate.setOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            if (tilIssueDate != null) {&#10;                tilIssueDate.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            }&#10;        }&#10;    }&#10;&#10;    private void showDatePickerDialog(final TextInputEditText editText) {&#10;        Calendar currentCalendar = Calendar.getInstance();&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, year, month, dayOfMonth) -&gt; {&#10;                    Calendar selected = Calendar.getInstance();&#10;                    selected.set(year, month, dayOfMonth);&#10;                    String formatted = dateFormatter.format(selected.getTime());&#10;                    editText.setText(formatted);&#10;                },&#10;                currentCalendar.get(Calendar.YEAR),&#10;                currentCalendar.get(Calendar.MONTH),&#10;                currentCalendar.get(Calendar.DAY_OF_MONTH)&#10;        );&#10;&#10;        if (editText == etDateOfBirth) { // giới hạn tuổi 18 - 100&#10;            Calendar minAge = Calendar.getInstance();&#10;            Calendar maxAge = Calendar.getInstance();&#10;            minAge.add(Calendar.YEAR, -100);&#10;            maxAge.add(Calendar.YEAR, -18);&#10;            datePickerDialog.getDatePicker().setMaxDate(maxAge.getTimeInMillis());&#10;            datePickerDialog.getDatePicker().setMinDate(minAge.getTimeInMillis());&#10;        }&#10;        if (editText == etIssueDate) { // không cho chọn quá ngày hiện tại&#10;            datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        }&#10;        datePickerDialog.show();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.net.Uri;&#10;import android.os.Bundle;&#10;import android.provider.MediaStore;&#10;import android.text.Editable;&#10;import android.text.SpannableString;&#10;import android.text.Spanned;&#10;import android.text.TextWatcher;&#10;import android.text.method.LinkMovementMethod;&#10;import android.text.style.ClickableSpan;&#10;import android.text.style.ForegroundColorSpan;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.ArrayAdapter;&#10;import android.widget.AutoCompleteTextView;&#10;import android.widget.Button;&#10;import android.widget.CheckBox;&#10;import android.widget.EditText;&#10;import android.widget.FrameLayout;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.activity.result.ActivityResultLauncher;&#10;import androidx.activity.result.contract.ActivityResultContracts;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.appcompat.app.AlertDialog;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;import com.parkmate.android.model.request.RegisterRequest;&#10;import com.parkmate.android.model.response.ErrorResponse;&#10;import com.parkmate.android.model.response.OtpVerifyResponse;&#10;import com.parkmate.android.model.response.RegisterResponse;&#10;import com.parkmate.android.repository.AuthRepository;&#10;import com.google.gson.Gson;&#10;import retrofit2.HttpException;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.Calendar;&#10;import java.util.Locale;&#10;import java.util.regex.Pattern;&#10;&#10;import io.reactivex.rxjava3.android.schedulers.AndroidSchedulers;&#10;import io.reactivex.rxjava3.disposables.CompositeDisposable;&#10;import io.reactivex.rxjava3.schedulers.Schedulers;&#10;import android.os.CountDownTimer;&#10;import com.parkmate.android.utils.LoadingButton;&#10;import com.parkmate.android.utils.validation.RegisterValidator;&#10;&#10;public class RegisterActivity extends AppCompatActivity {&#10;&#10;    private static final String TAG = &quot;RegisterActivity&quot;;&#10;    // Added screen index constants to avoid magic numbers&#10;    private static final int SCREEN_BASIC_INFO = 0;&#10;    private static final int SCREEN_CCCD_INFO = 1;&#10;    private static final int SCREEN_CHECK_EMAIL = 2;&#10;    private static final int SCREEN_OTP = 3;&#10;    private static final int SCREEN_SUCCESS = 4;&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private TextInputEditText etUsername, etEmail, etPassword, etConfirmPassword, etPhoneNumber;&#10;    private TextInputEditText etCccdNumber, etFirstName, etLastName, etDateOfBirth, etIssueDate, etIssuePlace;&#10;    private TextInputEditText etNationality, etPermanentAddress;&#10;    private AutoCompleteTextView actvGender;&#10;    private TextInputLayout tilDateOfBirth, tilIssueDate, tilGender;&#10;    private MaterialButton btnNext;&#10;    private Button btnContinue, btnVerify, btnLogin;&#10;    private ImageView ivBack, ivGoogleSignUp, ivFacebookSignUp;&#10;    private TextView tvLoginLink, tvUserEmail, tvResendCode;&#10;    private FrameLayout flFrontImage, flBackImage;&#10;    private ImageView ivFrontImage, ivBackImage;&#10;    private LinearLayout llFrontImagePlaceholder, llBackImagePlaceholder;&#10;    private CheckBox cbCommitment;&#10;&#10;    // OTP fields&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;&#10;    private Calendar calendar;&#10;    private SimpleDateFormat dateFormatter;&#10;    private Uri frontImageUri, backImageUri;&#10;    private String userEmail; // Store user email for OTP verification&#10;&#10;    // Activity result launchers for camera and gallery&#10;    private ActivityResultLauncher&lt;Intent&gt; frontCameraLauncher;&#10;    private ActivityResultLauncher&lt;Intent&gt; backCameraLauncher;&#10;&#10;    private CompositeDisposable compositeDisposable = new CompositeDisposable();&#10;    private static final Pattern USERNAME_ALLOWED = Pattern.compile(&quot;^[A-Za-z0-9_-]+$&quot;);&#10;    private AuthRepository authRepository;&#10;    private CountDownTimer resendTimer;&#10;    private static final long RESEND_OTP_INTERVAL_MS = 60000L;&#10;    private LoadingButton loadingButtonContinue;&#10;    private LoadingButton loadingButtonVerify;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_register);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Khởi tạo Calendar và định dạng ngày tháng&#10;        calendar = Calendar.getInstance();&#10;        dateFormatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;&#10;        // Khởi tạo ActivityResultLauncher cho chụp ảnh&#10;        setupImageCaptureLaunchers();&#10;&#10;        authRepository = new AuthRepository();&#10;        initViews();&#10;        setupGenderDropdown();&#10;        setupListeners();&#10;        setupLoginLink();&#10;        setupDatePickers();&#10;        setupImageCapture();&#10;    }&#10;&#10;    private void setupImageCaptureLaunchers() {&#10;        // Launcher cho hình ảnh mặt trước CCCD&#10;        frontCameraLauncher = registerForActivityResult(&#10;                new ActivityResultContracts.StartActivityForResult(),&#10;                result -&gt; {&#10;                    if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                        // Xử lý hình ảnh được chụp&#10;                        Bundle extras = result.getData().getExtras();&#10;                        if (extras != null) {&#10;                            Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                            if (imageUri != null) {&#10;                                frontImageUri = imageUri;&#10;                                ivFrontImage.setImageURI(frontImageUri);&#10;                                ivFrontImage.setVisibility(View.VISIBLE);&#10;                                llFrontImagePlaceholder.setVisibility(View.GONE);&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;        );&#10;&#10;        // Launcher cho hình ảnh mặt sau CCCD&#10;        backCameraLauncher = registerForActivityResult(&#10;                new ActivityResultContracts.StartActivityForResult(),&#10;                result -&gt; {&#10;                    if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                        // Xử lý hình ảnh được chụp&#10;                        Bundle extras = result.getData().getExtras();&#10;                        if (extras != null) {&#10;                            Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                            if (imageUri != null) {&#10;                                backImageUri = imageUri;&#10;                                ivBackImage.setImageURI(backImageUri);&#10;                                ivBackImage.setVisibility(View.VISIBLE);&#10;                                llBackImagePlaceholder.setVisibility(View.GONE);&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;        );&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;&#10;        // Ánh xạ các view từ layout đầu tiên (Thông tin cơ bản)&#10;        etUsername = findViewById(R.id.etUsername);&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        etConfirmPassword = findViewById(R.id.etConfirmPassword);&#10;        etPhoneNumber = findViewById(R.id.etPhoneNumber);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        ivGoogleSignUp = findViewById(R.id.ivGoogleSignUp);&#10;        ivFacebookSignUp = findViewById(R.id.ivFacebookSignUp);&#10;        tvLoginLink = findViewById(R.id.tvLoginLink);&#10;&#10;        // Ánh xạ các view từ layout thứ hai (Thông tin CCCD)&#10;        etCccdNumber = findViewById(R.id.etCccdNumber);&#10;        etFirstName = findViewById(R.id.etFirstName);&#10;        etLastName = findViewById(R.id.etLastName);&#10;        etDateOfBirth = findViewById(R.id.etDateOfBirth);&#10;        etIssueDate = findViewById(R.id.etIssueDate);&#10;        etIssuePlace = findViewById(R.id.etIssuePlace);&#10;        tilDateOfBirth = findViewById(R.id.tilDateOfBirth);&#10;        tilIssueDate = findViewById(R.id.tilIssueDate);&#10;&#10;        // Ánh xạ các trường mới được thêm vào&#10;        actvGender = findViewById(R.id.actvGender);&#10;        tilGender = findViewById(R.id.tilGender);&#10;        etNationality = findViewById(R.id.etNationality);&#10;        etPermanentAddress = findViewById(R.id.etPermanentAddress);&#10;&#10;        // Ánh xạ nút &quot;Tiếp tục&quot; trong layout CCCD info&#10;        btnContinue = findViewById(R.id.btnContinue);&#10;&#10;        // Ánh xạ nút quay lại dưới dạng mũi tên&#10;        ivBack = findViewById(R.id.ivBack);&#10;&#10;        // Ánh xạ các view cho hình ảnh&#10;        flFrontImage = findViewById(R.id.flFrontImage);&#10;        flBackImage = findViewById(R.id.flBackImage);&#10;        ivFrontImage = findViewById(R.id.ivFrontImage);&#10;        ivBackImage = findViewById(R.id.ivBackImage);&#10;        llFrontImagePlaceholder = findViewById(R.id.llFrontImagePlaceholder);&#10;        llBackImagePlaceholder = findViewById(R.id.llBackImagePlaceholder);&#10;&#10;        // Ánh xạ checkbox cam kết&#10;        cbCommitment = findViewById(R.id.cbCommitment);&#10;    }&#10;&#10;    private void setupGenderDropdown() {&#10;        // Thiết lập dropdown cho lựa chọn giới tính&#10;        String[] genderOptions = {&quot;Nam&quot;, &quot;Nữ&quot;, &quot;Khác&quot;};&#10;        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(&#10;                this,&#10;                android.R.layout.simple_dropdown_item_1line,&#10;                genderOptions&#10;        );&#10;        if (actvGender != null) {&#10;            actvGender.setAdapter(adapter);&#10;        }&#10;    }&#10;&#10;    private void setupImageCapture() {&#10;        // Thiết lập sự kiện khi nhấn vào khung chụp ảnh&#10;        if (flFrontImage != null) {&#10;            flFrontImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    frontCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                            &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                            Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;&#10;        if (flBackImage != null) {&#10;            flBackImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    backCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                            &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                            Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupListeners() {&#10;        ivBack.setOnClickListener(v -&gt; {&#10;            if (viewFlipper.getDisplayedChild() &gt; 0) {&#10;                viewFlipper.showPrevious();&#10;            } else {&#10;                finish();&#10;            }&#10;        });&#10;&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            if (validateBasicInfo()) {&#10;                viewFlipper.setDisplayedChild(SCREEN_CCCD_INFO);&#10;            }&#10;        });&#10;&#10;        if (btnContinue != null) {&#10;            btnContinue.setOnClickListener(v -&gt; {&#10;                if (validateCccdInfo()) {&#10;                    userEmail = etEmail.getText().toString().trim();&#10;                    // CHỈ chuyển sang màn Check Email, CHƯA gửi OTP ở bước này&#10;                    viewFlipper.setDisplayedChild(SCREEN_CHECK_EMAIL);&#10;                    setupCheckEmailScreen();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupCheckEmailScreen() {&#10;        View checkEmailView = viewFlipper.getChildAt(SCREEN_CHECK_EMAIL);&#10;        if (checkEmailView == null) {&#10;            Log.e(TAG, &quot;Check Email view is null at index &quot; + SCREEN_CHECK_EMAIL);&#10;            return;&#10;        }&#10;        TextView tvTitle = checkEmailView.findViewById(R.id.tvTitle);&#10;        TextView tvDescription = checkEmailView.findViewById(R.id.tvDescription);&#10;        tvUserEmail = checkEmailView.findViewById(R.id.tvUserEmail);&#10;        Button btnEmailContinue = checkEmailView.findViewById(R.id.btnContinue);&#10;&#10;        if (tvTitle != null) tvTitle.setText(R.string.register_check_email);&#10;        if (tvDescription != null) tvDescription.setText(R.string.register_check_email_description);&#10;        if (tvUserEmail != null) tvUserEmail.setText(userEmail);&#10;&#10;        if (btnEmailContinue != null) {&#10;            // Khởi tạo LoadingButton cho nút Continue&#10;            loadingButtonContinue = new LoadingButton(btnEmailContinue);&#10;&#10;            btnEmailContinue.setOnClickListener(v -&gt; {&#10;                // Gọi register tại đây để BE gửi OTP (không tự gửi OTP thủ công nữa)&#10;                loadingButtonContinue.showLoading(&quot;Đang đăng ký...&quot;);&#10;                performRegisterForOtp();&#10;            });&#10;        }&#10;    }&#10;&#10;    // Đăng ký để backend gửi OTP – sau thành công chuyển sang màn hình OTP&#10;    private void performRegisterForOtp() {&#10;        RegisterRequest request = buildRegisterRequest();&#10;        compositeDisposable.add(&#10;                authRepository.register(request)&#10;                        .subscribeOn(Schedulers.io())&#10;                        .observeOn(AndroidSchedulers.mainThread())&#10;                        .subscribe(&#10;                                resp -&gt; {&#10;                                    if (loadingButtonContinue != null) loadingButtonContinue.hideLoading();&#10;                                    // Lưu token (nếu có) trước khi chuyển sang OTP&#10;                                    storeRegisterToken(resp);&#10;                                    Toast.makeText(this, &quot;OTP đã được gửi tới email&quot;, Toast.LENGTH_SHORT).show();&#10;                                    viewFlipper.setDisplayedChild(SCREEN_OTP);&#10;                                    setupOtpScreen();&#10;                                },&#10;                                err -&gt; {&#10;                                    if (loadingButtonContinue != null) loadingButtonContinue.hideLoading();&#10;                                    if (tryHandleAccountExists(err)) return; // nếu đã xử lý dialog thì dừng&#10;                                    boolean handled = parseAndApplyBackendErrors(err);&#10;                                    if (!handled) {&#10;                                        String msg = err.getMessage();&#10;                                        if (msg == null) msg = &quot;Đăng ký thất bại&quot;;&#10;                                        Toast.makeText(this, msg, Toast.LENGTH_LONG).show();&#10;                                    }&#10;                                }&#10;                        )&#10;        );&#10;    }&#10;&#10;    private void storeRegisterToken(RegisterResponse resp) {&#10;        if (resp == null) return;&#10;        String rawToken = resp.getAnyToken();&#10;        if (rawToken == null || rawToken.isEmpty()) {&#10;            Log.w(TAG, &quot;Register response không có token để lưu (có thể backend không yêu cầu Authorization cho verify hoặc đang thiếu spec)&quot;);&#10;            return;&#10;        }&#10;        String cleaned = rawToken.startsWith(&quot;Bearer &quot;) ? rawToken.substring(7) : rawToken;&#10;        try {&#10;            com.parkmate.android.utils.TokenManager.getInstance().saveToken(cleaned);&#10;            Log.d(TAG, &quot;Đã lưu token đăng ký (length=&quot; + cleaned.length() + &quot;)&quot;);&#10;        } catch (IllegalStateException e) {&#10;            Log.e(TAG, &quot;TokenManager chưa init. Cần gọi TokenManager.init(context) trong Application hoặc SplashActivity trước.&quot;, e);&#10;        }&#10;    }&#10;&#10;    // Thử parse lỗi account exists&#10;    private boolean tryHandleAccountExists(Throwable t) {&#10;        if (!(t instanceof HttpException)) return false;&#10;        try {&#10;            HttpException httpEx = (HttpException) t;&#10;            String body = httpEx.response() != null &amp;&amp; httpEx.response().errorBody() != null ? httpEx.response().errorBody().string() : null;&#10;            if (body == null || body.isEmpty()) return false;&#10;            ErrorResponse er = new Gson().fromJson(body, ErrorResponse.class);&#10;            if ( er == null || er.getError() == null ) return false;&#10;            String code = er.getError().getCode();&#10;            if (&quot;ACCOUNT_ALREADY_EXISTS&quot;.equalsIgnoreCase(code)) {&#10;                showEmailExistsDialog(userEmail, er);&#10;                return true;&#10;            }&#10;        } catch (Exception e) {&#10;            Log.e(TAG, &quot;Parse ACCOUNT_ALREADY_EXISTS failed&quot;, e);&#10;        }&#10;        return false;&#10;    }&#10;&#10;    private void showEmailExistsDialog(String email, ErrorResponse er) {&#10;        if (etEmail != null) etEmail.setError(getString(R.string.error_email_exists));&#10;        String detail = getString(R.string.error_email_exists_detail, email);&#10;        new AlertDialog.Builder(this)&#10;                .setTitle(R.string.error_email_exists)&#10;                .setMessage(detail)&#10;                .setCancelable(false)&#10;                .setPositiveButton(R.string.action_login_now, (d, which) -&gt; {&#10;                    startActivity(new Intent(this, LoginActivity.class));&#10;                    finish();&#10;                })&#10;                .setNegativeButton(R.string.action_use_other_email, (d, w) -&gt; {&#10;                    viewFlipper.setDisplayedChild(SCREEN_BASIC_INFO);&#10;                    if (etEmail != null) {&#10;                        etEmail.requestFocus();&#10;                        etEmail.selectAll();&#10;                    }&#10;                })&#10;                .setNeutralButton(R.string.action_forgot_password, (d, w) -&gt; {&#10;                    Intent i = new Intent(this, ForgotPasswordActivity.class);&#10;                    i.putExtra(&quot;email_prefill&quot;, email);&#10;                    startActivity(i);&#10;                })&#10;                .show();&#10;    }&#10;&#10;    private void setupOtpScreen() {&#10;        View otpView = viewFlipper.getChildAt(SCREEN_OTP);&#10;        if (otpView == null) {&#10;            Log.e(TAG, &quot;OTP view is null at index &quot; + SCREEN_OTP);&#10;            return;&#10;        }&#10;        TextView tvTitle = otpView.findViewById(R.id.tvTitle);&#10;        TextView tvDescription = otpView.findViewById(R.id.tvDescription);&#10;        etOtp1 = otpView.findViewById(R.id.etOtp1);&#10;        etOtp2 = otpView.findViewById(R.id.etOtp2);&#10;        etOtp3 = otpView.findViewById(R.id.etOtp3);&#10;        etOtp4 = otpView.findViewById(R.id.etOtp4);&#10;        etOtp5 = otpView.findViewById(R.id.etOtp5);&#10;        etOtp6 = otpView.findViewById(R.id.etOtp6);&#10;        tvResendCode = otpView.findViewById(R.id.tvResendCode);&#10;        btnVerify = otpView.findViewById(R.id.btnVerify);&#10;&#10;        if (tvTitle != null) tvTitle.setText(R.string.register_enter_otp);&#10;        if (tvDescription != null) tvDescription.setText(R.string.register_otp_description);&#10;&#10;        setupOtpTextWatchers();&#10;        startResendCountdown();&#10;&#10;        if (btnVerify != null) {&#10;            // Khởi tạo LoadingButton cho nút Verify&#10;            loadingButtonVerify = new LoadingButton(btnVerify);&#10;&#10;            btnVerify.setOnClickListener(v -&gt; {&#10;                if (validateOTP()) {&#10;                    String otp = collectOtp();&#10;                    verifyOtpOnly(otp);&#10;                }&#10;            });&#10;        }&#10;        if (tvResendCode != null) {&#10;            tvResendCode.setOnClickListener(v -&gt; {&#10;                if (tvResendCode.isEnabled()) {&#10;                    // Trường hợp BE có endpoint resend OTP riêng -&gt; TODO sau&#10;                    Toast.makeText(this, &quot;Yêu cầu gửi lại OTP (cần implement API)&quot;, Toast.LENGTH_SHORT).show();&#10;                    startResendCountdown();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    // Chỉ verify OTP (không gọi register nữa)&#10;    private void verifyOtpOnly(String otp) {&#10;        loadingButtonVerify.showLoading(&quot;Đang xác thực...&quot;);&#10;        compositeDisposable.add(&#10;                authRepository.verifyOtp(userEmail, otp)&#10;                        .subscribeOn(Schedulers.io())&#10;                        .observeOn(AndroidSchedulers.mainThread())&#10;                        .subscribe(&#10;                                this::onOtpVerifiedSuccess,&#10;                                this::onOtpVerifyFailedFinal&#10;                        )&#10;        );&#10;    }&#10;&#10;    private void onOtpVerifiedSuccess(OtpVerifyResponse resp) {&#10;        if (loadingButtonVerify != null) loadingButtonVerify.hideLoading();&#10;        boolean ok = resp != null &amp;&amp; Boolean.TRUE.equals(resp.getSuccess());&#10;        Log.d(TAG, &quot;OTP verify response successFlag=&quot; + ok + &quot;, message=&quot; + (resp == null ? &quot;null&quot; : resp.getMessage()));&#10;        if (!ok) {&#10;            String msg = resp != null &amp;&amp; resp.getMessage() != null ? resp.getMessage() : &quot;Xác thực OTP không thành công&quot;;&#10;            Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();&#10;            // Highlight first OTP box as error hint&#10;            if (etOtp1 != null) etOtp1.setError(msg);&#10;            return;&#10;        }&#10;        // OTP ok -&gt; sang success&#10;        viewFlipper.setDisplayedChild(SCREEN_SUCCESS);&#10;        setupSuccessScreen();&#10;        Toast.makeText(this, resp.getMessage() != null ? resp.getMessage() : &quot;Xác thực thành công&quot;, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void onOtpVerifyFailedFinal(Throwable throwable) {&#10;        if (loadingButtonVerify != null) loadingButtonVerify.hideLoading();&#10;        Log.e(TAG, &quot;OTP verify failed raw: &quot; + throwable.getMessage(), throwable);&#10;        boolean handled = parseAndApplyBackendErrors(throwable);&#10;        if (!handled) {&#10;            Toast.makeText(this, &quot;Xác thực OTP thất bại&quot;, Toast.LENGTH_SHORT).show();&#10;        }&#10;    }&#10;&#10;    private void setupSuccessScreen() {&#10;        View successView = viewFlipper.getChildAt(SCREEN_SUCCESS);&#10;        if (successView == null) {&#10;            Log.e(TAG, &quot;Success view is null at index &quot; + SCREEN_SUCCESS);&#10;            return;&#10;        }&#10;        TextView tvSuccessTitle = successView.findViewById(R.id.tvTitle);&#10;        TextView tvSuccessDescription = successView.findViewById(R.id.tvDescription);&#10;        btnLogin = successView.findViewById(R.id.btnLogin);&#10;&#10;        if (tvSuccessTitle != null) tvSuccessTitle.setText(R.string.registration_success);&#10;        if (tvSuccessDescription != null) tvSuccessDescription.setText(R.string.registration_success_description);&#10;&#10;        if (btnLogin != null) {&#10;            btnLogin.setOnClickListener(v -&gt; {&#10;                startActivity(new Intent(this, LoginActivity.class));&#10;                finish();&#10;            });&#10;        }&#10;    }&#10;&#10;    // ==== Refactor validateBasicInfo dùng RegisterValidator ====&#10;    private boolean validateBasicInfo() {&#10;        String username = safeText(etUsername);&#10;        String email = safeText(etEmail);&#10;        String password = safeText(etPassword);&#10;        String confirmPassword = safeText(etConfirmPassword);&#10;        String phone = safeText(etPhoneNumber);&#10;        &#10;        // Validate username&#10;        clearBasicErrors();&#10;        &#10;        if (username.isEmpty()) {&#10;            etUsername.setError(&quot;Username không được để trống&quot;);&#10;            return false;&#10;        }&#10;        if (username.length() &lt; 3) {&#10;            etUsername.setError(&quot;Username phải có ít nhất 3 ký tự&quot;);&#10;            return false;&#10;        }&#10;        if (!USERNAME_ALLOWED.matcher(username).matches()) {&#10;            etUsername.setError(&quot;Username chỉ được chứa chữ cái, số, dấu gạch dưới và gạch ngang&quot;);&#10;            return false;&#10;        }&#10;        &#10;        // Validate email&#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Email không được để trống&quot;);&#10;            return false;&#10;        }&#10;        if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            etEmail.setError(&quot;Email không hợp lệ&quot;);&#10;            return false;&#10;        }&#10;        &#10;        // Validate phone&#10;        if (phone.isEmpty()) {&#10;            etPhoneNumber.setError(&quot;Số điện thoại không được để trống&quot;);&#10;            return false;&#10;        }&#10;        if (phone.length() &lt; 10) {&#10;            etPhoneNumber.setError(&quot;Số điện thoại phải có ít nhất 10 số&quot;);&#10;            return false;&#10;        }&#10;        &#10;        // Validate password&#10;        if (password.isEmpty()) {&#10;            etPassword.setError(&quot;Mật khẩu không được để trống&quot;);&#10;            return false;&#10;        }&#10;        if (password.length() &lt; 8) {&#10;            etPassword.setError(&quot;Mật khẩu phải có ít nhất 8 ký tự&quot;);&#10;            return false;&#10;        }&#10;        &#10;        // Validate confirm password&#10;        if (!password.equals(confirmPassword)) {&#10;            etConfirmPassword.setError(&quot;Mật khẩu xác nhận không khớp&quot;);&#10;            return false;&#10;        }&#10;        &#10;        return true;&#10;    }&#10;&#10;    private void clearBasicErrors() {&#10;        if (etUsername != null) etUsername.setError(null);&#10;        if (etEmail != null) etEmail.setError(null);&#10;        if (etPassword != null) etPassword.setError(null);&#10;        if (etConfirmPassword != null) etConfirmPassword.setError(null);&#10;        if (etPhoneNumber != null) etPhoneNumber.setError(null);&#10;    }&#10;&#10;    private boolean validateCccdInfo() {&#10;        String cccdNumber = safeText(etCccdNumber);&#10;        String firstName = safeText(etFirstName);&#10;        String lastName = safeText(etLastName);&#10;        String dateOfBirth = safeText(etDateOfBirth);&#10;        String issueDate = safeText(etIssueDate);&#10;        String issuePlace = safeText(etIssuePlace);&#10;        String gender = actvGender != null ? actvGender.getText().toString().trim() : &quot;&quot;;&#10;        String nationality = safeText(etNationality);&#10;        String permanentAddress = safeText(etPermanentAddress);&#10;        boolean commitment = cbCommitment != null &amp;&amp; cbCommitment.isChecked();&#10;        &#10;        clearCccdErrors();&#10;        &#10;        if (cccdNumber.isEmpty()) {&#10;            etCccdNumber.setError(&quot;Số CCCD không được để trống&quot;);&#10;            return false;&#10;        }&#10;        if (cccdNumber.length() != 9 &amp;&amp; cccdNumber.length() != 12) {&#10;            etCccdNumber.setError(&quot;Số CCCD phải có 9 hoặc 12 số&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (firstName.isEmpty()) {&#10;            etFirstName.setError(&quot;Họ và tên đệm không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (lastName.isEmpty()) {&#10;            etLastName.setError(&quot;Tên không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (dateOfBirth.isEmpty()) {&#10;            etDateOfBirth.setError(&quot;Ngày sinh không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (gender.isEmpty()) {&#10;            actvGender.setError(&quot;Vui lòng chọn giới tính&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (nationality.isEmpty()) {&#10;            etNationality.setError(&quot;Quốc tịch không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (permanentAddress.isEmpty()) {&#10;            etPermanentAddress.setError(&quot;Địa chỉ thường trú không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (issueDate.isEmpty()) {&#10;            etIssueDate.setError(&quot;Ngày cấp không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (issuePlace.isEmpty()) {&#10;            etIssuePlace.setError(&quot;Nơi cấp không được để trống&quot;);&#10;            return false;&#10;        }&#10;        &#10;        if (!commitment) {&#10;            Toast.makeText(this, &quot;Bạn cần cam kết thông tin là chính xác&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        &#10;        return true;&#10;    }&#10;&#10;    private void clearCccdErrors() {&#10;        if (etCccdNumber != null) etCccdNumber.setError(null);&#10;        if (etFirstName != null) etFirstName.setError(null);&#10;        if (etLastName != null) etLastName.setError(null);&#10;        if (etDateOfBirth != null) etDateOfBirth.setError(null);&#10;        if (etIssueDate != null) etIssueDate.setError(null);&#10;        if (etIssuePlace != null) etIssuePlace.setError(null);&#10;        if (actvGender != null) actvGender.setError(null);&#10;        if (etNationality != null) etNationality.setError(null);&#10;        if (etPermanentAddress != null) etPermanentAddress.setError(null);&#10;    }&#10;&#10;    // =================== HELPER METHODS KHÔI PHỤC (BỊ THIẾU) ===================&#10;    private void sendOTPToEmail(String email) {&#10;        // TODO: Gọi API gửi OTP thực tế – hiện chỉ hiển thị thông báo&#10;        Toast.makeText(this, &quot;Đã gửi mã OTP đến: &quot; + email, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void setupOtpTextWatchers() {&#10;        if (etOtp1 == null) return;&#10;        etOtp1.addTextChangedListener(new OTPTextWatcher(etOtp1, etOtp2));&#10;        etOtp2.addTextChangedListener(new OTPTextWatcher(etOtp2, etOtp3));&#10;        etOtp3.addTextChangedListener(new OTPTextWatcher(etOtp3, etOtp4));&#10;        etOtp4.addTextChangedListener(new OTPTextWatcher(etOtp4, etOtp5));&#10;        etOtp5.addTextChangedListener(new OTPTextWatcher(etOtp5, etOtp6));&#10;        etOtp6.addTextChangedListener(new OTPTextWatcher(etOtp6, null));&#10;    }&#10;&#10;    private void startResendCountdown() {&#10;        if (tvResendCode == null) return;&#10;        tvResendCode.setEnabled(false);&#10;        if (resendTimer != null) resendTimer.cancel();&#10;        resendTimer = new CountDownTimer(RESEND_OTP_INTERVAL_MS, 1000) {&#10;            @Override public void onTick(long millisUntilFinished) {&#10;                long sec = millisUntilFinished / 1000;&#10;                tvResendCode.setText(&quot;Gửi lại mã (&quot; + sec + &quot;s)&quot;);&#10;            }&#10;            @Override public void onFinish() {&#10;                tvResendCode.setEnabled(true);&#10;                tvResendCode.setText(getString(R.string.resend_code));&#10;            }&#10;        }.start();&#10;    }&#10;&#10;    private boolean validateOTP() {&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || etOtp4 == null || etOtp5 == null || etOtp6 == null)&#10;            return false;&#10;        if (safeText(etOtp1).isEmpty() || safeText(etOtp2).isEmpty() || safeText(etOtp3).isEmpty() ||&#10;                safeText(etOtp4).isEmpty() || safeText(etOtp5).isEmpty() || safeText(etOtp6).isEmpty()) {&#10;            Toast.makeText(this, &quot;Vui lòng nhập đầy đủ mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private String collectOtp() {&#10;        return safeText(etOtp1) + safeText(etOtp2) + safeText(etOtp3) + safeText(etOtp4) + safeText(etOtp5) + safeText(etOtp6);&#10;    }&#10;&#10;    private RegisterRequest buildRegisterRequest() {&#10;        // Lấy username trực tiếp từ form Basic Info (không auto-generate nữa)&#10;        String username = safeText(etUsername);&#10;        String email = safeText(etEmail);&#10;        String password = safeText(etPassword);&#10;        String phone = safeText(etPhoneNumber);&#10;        &#10;        // Lấy firstName và lastName từ form CCCD&#10;        String firstName = safeText(etFirstName);&#10;        String lastName = safeText(etLastName);&#10;        &#10;        // Các thông tin CCCD khác&#10;        String cccdNumber = safeText(etCccdNumber);&#10;        String permanentAddress = safeText(etPermanentAddress);&#10;        String dateOfBirthUi = safeText(etDateOfBirth); // dd/MM/yyyy&#10;        String dateOfBirthIso = formatDobToIso(dateOfBirthUi);&#10;        &#10;        // Phần chụp ảnh tạm thời null (đã bị ẩn)&#10;        String frontPhotoPath = null;&#10;        String backPhotoPath = null;&#10;&#10;        return new RegisterRequest(&#10;                email,&#10;                username,&#10;                password,&#10;                phone,&#10;                firstName,&#10;                lastName,&#10;                cccdNumber,&#10;                dateOfBirthIso,&#10;                permanentAddress,&#10;                frontPhotoPath,&#10;                backPhotoPath&#10;        );&#10;    }&#10;&#10;    private String safeText(EditText et) {&#10;        return et == null || et.getText() == null ? &quot;&quot; : et.getText().toString().trim();&#10;    }&#10;&#10;    private String[] splitName(String fullName) {&#10;        if (fullName == null || fullName.isEmpty()) return new String[]{&quot;&quot;, &quot;&quot;};&#10;        String[] parts = fullName.trim().split(&quot;\\s+&quot;);&#10;        if (parts.length == 1) return new String[]{parts[0], parts[0]};&#10;        StringBuilder first = new StringBuilder();&#10;        for (int i = 0; i &lt; parts.length - 1; i++) {&#10;            if (i &gt; 0) first.append(&quot; &quot;);&#10;            first.append(parts[i]);&#10;        }&#10;        String last = parts[parts.length - 1];&#10;        return new String[]{first.toString(), last};&#10;    }&#10;&#10;    private String formatDobToIso(String dobUi) {&#10;        if (dobUi == null || dobUi.isEmpty()) return &quot;1990-01-01T00:00:00&quot;; // fallback&#10;        try {&#10;            SimpleDateFormat uiFmt = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            SimpleDateFormat isoFmt = new SimpleDateFormat(&quot;yyyy-MM-dd'T'00:00:00&quot;, Locale.getDefault());&#10;            return isoFmt.format(uiFmt.parse(dobUi));&#10;        } catch (Exception e) {&#10;            return &quot;1990-01-01T00:00:00&quot;;&#10;        }&#10;    }&#10;&#10;    private String generateUsername(String email, String fullName) {&#10;        String base = null;&#10;        if (email != null &amp;&amp; email.contains(&quot;@&quot;)) base = email.substring(0, email.indexOf('@'));&#10;        if (base == null || base.isEmpty()) {&#10;            base = fullName == null ? &quot;&quot; : fullName.trim().replaceAll(&quot;\\s+&quot;, &quot;-&quot;).toLowerCase(Locale.getDefault());&#10;        }&#10;        base = base.replaceAll(&quot;[^A-Za-z0-9_-]&quot;, &quot;_&quot;)&#10;                   .replaceAll(&quot;_+&quot;, &quot;_&quot;);&#10;        if (base.isEmpty()) base = &quot;user&quot; + System.currentTimeMillis();&#10;        if (base.length() &gt; 30) base = base.substring(0, 30);&#10;        return base;&#10;    }&#10;&#10;    // Map field error from backend to the appropriate UI element&#10;    private void applyFieldError(ErrorResponse.FieldError fe) {&#10;        if (fe == null) return;&#10;        String field = fe.getField();&#10;        String msg = fe.getMessage() != null ? fe.getMessage() : &quot;Giá trị không hợp lệ&quot;;&#10;        if (field == null) {&#10;            if (etOtp1 != null) etOtp1.setError(msg);&#10;            return;&#10;        }&#10;        switch (field) {&#10;            case &quot;email&quot;:&#10;                if (etEmail != null) etEmail.setError(msg);&#10;                break;&#10;            case &quot;username&quot;:&#10;                // Hiện chưa có ô riêng username -&gt; reuse email cho cảnh báo&#10;                if (etEmail != null) etEmail.setError(msg);&#10;                break;&#10;            case &quot;password&quot;:&#10;                if (etPassword != null) etPassword.setError(msg);&#10;                break;&#10;            case &quot;confirmPassword&quot;:&#10;                if (etConfirmPassword != null) etConfirmPassword.setError(msg);&#10;                break;&#10;            case &quot;idNumber&quot;:&#10;            case &quot;cccdNumber&quot;:&#10;                if (etCccdNumber != null) etCccdNumber.setError(msg);&#10;                break;&#10;            case &quot;firstName&quot;:&#10;            case &quot;lastName&quot;:&#10;                if (etFirstName != null) etFirstName.setError(msg);&#10;                break;&#10;            case &quot;dateOfBirth&quot;:&#10;                if (etDateOfBirth != null) etDateOfBirth.setError(msg);&#10;                break;&#10;            case &quot;issueDate&quot;:&#10;                if (etIssueDate != null) etIssueDate.setError(msg);&#10;                break;&#10;            case &quot;issuePlace&quot;:&#10;                if (etIssuePlace != null) etIssuePlace.setError(msg);&#10;                break;&#10;            case &quot;gender&quot;:&#10;                if (actvGender != null) actvGender.setError(msg);&#10;                break;&#10;            case &quot;nationality&quot;:&#10;                if (etNationality != null) etNationality.setError(msg);&#10;                break;&#10;            case &quot;address&quot;:&#10;            case &quot;permanentAddress&quot;:&#10;                if (etPermanentAddress != null) etPermanentAddress.setError(msg);&#10;                break;&#10;            case &quot;otp&quot;:&#10;            default:&#10;                if (etOtp1 != null) etOtp1.setError(msg);&#10;                break;&#10;        }&#10;    }&#10;&#10;    private boolean parseAndApplyBackendErrors(Throwable t) {&#10;        if (!(t instanceof HttpException)) return false;&#10;        HttpException httpEx = (HttpException) t;&#10;        try {&#10;            String body = httpEx.response() != null &amp;&amp; httpEx.response().errorBody() != null&#10;                    ? httpEx.response().errorBody().string() : null;&#10;            Log.e(TAG, &quot;HTTP &quot; + httpEx.code() + &quot; OTP error body: &quot; + body);&#10;            if (body == null || body.isEmpty()) return false;&#10;            Gson gson = new Gson();&#10;            ErrorResponse er = gson.fromJson(body, ErrorResponse.class);&#10;            if (er == null || er.getError() == null) return false;&#10;&#10;            // Field errors first&#10;            if (er.getError().getFieldErrors() != null &amp;&amp; !er.getError().getFieldErrors().isEmpty()) {&#10;                for (ErrorResponse.FieldError fe : er.getError().getFieldErrors()) {&#10;                    applyFieldError(fe);&#10;                }&#10;                if (er.getMessage() != null) {&#10;                    Toast.makeText(this, er.getMessage(), Toast.LENGTH_SHORT).show();&#10;                }&#10;                return true;&#10;            }&#10;&#10;            String code = er.getError().getCode();&#10;            if (code != null) {&#10;                switch (code) {&#10;                    case &quot;UNCATEGORIZED_EXCEPTION&quot;:&#10;                        Toast.makeText(this, &quot;Hệ thống đang bận hoặc gặp sự cố. Vui lòng thử lại sau.&quot;, Toast.LENGTH_LONG).show();&#10;                        Log.e(TAG, &quot;Server uncategorized exception: &quot; + er.getMessage());&#10;                        return true;&#10;                    case &quot;ACCOUNT_ALREADY_EXISTS&quot;:&#10;                        showEmailExistsDialog(userEmail, er);&#10;                        return true;&#10;                    case &quot;INVALID_OTP&quot;:&#10;                    case &quot;OTP_INVALID&quot;:&#10;                        showOtpInlineError(er.getMessage() != null ? er.getMessage() : &quot;Mã OTP không hợp lệ&quot;);&#10;                        return true;&#10;                    case &quot;OTP_EXPIRED&quot;:&#10;                        showOtpInlineError(er.getMessage() != null ? er.getMessage() : &quot;Mã OTP đã hết hạn, vui lòng yêu cầu mã mới&quot;);&#10;                        return true;&#10;                    default:&#10;                        if (er.getMessage() != null) {&#10;                            Toast.makeText(this, er.getMessage(), Toast.LENGTH_SHORT).show();&#10;                            return true;&#10;                        }&#10;                }&#10;            }&#10;            return false;&#10;        } catch (Exception e) {&#10;            Log.e(TAG, &quot;Parse backend error fail&quot;, e);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    private void showOtpInlineError(String msg) {&#10;        if (etOtp1 != null) etOtp1.setError(msg);&#10;        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();&#10;    }&#10;    // ================= END HELPER METHODS ======================&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        if (resendTimer != null) resendTimer.cancel();&#10;        compositeDisposable.clear();&#10;        super.onDestroy();&#10;    }&#10;&#10;    // Inner class for OTP text change handling&#10;    private class OTPTextWatcher implements TextWatcher {&#10;        private EditText currentEditText;&#10;        private EditText nextEditText;&#10;&#10;        public OTPTextWatcher(EditText currentEditText, EditText nextEditText) {&#10;            this.currentEditText = currentEditText;&#10;            this.nextEditText = nextEditText;&#10;        }&#10;&#10;        @Override&#10;        public void beforeTextChanged(CharSequence s, int start, int count, int after) {&#10;        }&#10;&#10;        @Override&#10;        public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;        }&#10;&#10;        @Override&#10;        public void afterTextChanged(Editable s) {&#10;            if (s.length() == 1 &amp;&amp; nextEditText != null) {&#10;                nextEditText.requestFocus();&#10;            }&#10;        }&#10;    }&#10;&#10;    // === Khôi phục hàm setupLoginLink &amp; setupDatePickers (bị thiếu) ===&#10;    private void setupLoginLink() {&#10;        if (tvLoginLink == null) return;&#10;        String text = &quot;Đã có tài khoản? Đăng nhập&quot;;&#10;        SpannableString ss = new SpannableString(text);&#10;        int start = text.indexOf(&quot;Đăng nhập&quot;);&#10;        int end = start + &quot;Đăng nhập&quot;.length();&#10;        ss.setSpan(new ClickableSpan() {&#10;            @Override&#10;            public void onClick(View widget) {&#10;                startActivity(new Intent(RegisterActivity.this, LoginActivity.class));&#10;                finish();&#10;            }&#10;        }, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        ss.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.colorPrimary)), start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        tvLoginLink.setText(ss);&#10;        tvLoginLink.setMovementMethod(LinkMovementMethod.getInstance());&#10;    }&#10;&#10;    private void setupDatePickers() {&#10;        if (etDateOfBirth != null) {&#10;            etDateOfBirth.setOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            if (tilDateOfBirth != null) {&#10;                tilDateOfBirth.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            }&#10;        }&#10;        if (etIssueDate != null) {&#10;            etIssueDate.setOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            if (tilIssueDate != null) {&#10;                tilIssueDate.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            }&#10;        }&#10;    }&#10;&#10;    private void showDatePickerDialog(final TextInputEditText editText) {&#10;        Calendar currentCalendar = Calendar.getInstance();&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, year, month, dayOfMonth) -&gt; {&#10;                    Calendar selected = Calendar.getInstance();&#10;                    selected.set(year, month, dayOfMonth);&#10;                    String formatted = dateFormatter.format(selected.getTime());&#10;                    editText.setText(formatted);&#10;                },&#10;                currentCalendar.get(Calendar.YEAR),&#10;                currentCalendar.get(Calendar.MONTH),&#10;                currentCalendar.get(Calendar.DAY_OF_MONTH)&#10;        );&#10;&#10;        if (editText == etDateOfBirth) { // giới hạn tuổi 18 - 100&#10;            Calendar minAge = Calendar.getInstance();&#10;            Calendar maxAge = Calendar.getInstance();&#10;            minAge.add(Calendar.YEAR, -100);&#10;            maxAge.add(Calendar.YEAR, -18);&#10;            datePickerDialog.getDatePicker().setMaxDate(maxAge.getTimeInMillis());&#10;            datePickerDialog.getDatePicker().setMinDate(minAge.getTimeInMillis());&#10;        }&#10;        if (editText == etIssueDate) { // không cho chọn quá ngày hiện tại&#10;            datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        }&#10;        datePickerDialog.show();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java.fixed">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java.fixed" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.net.Uri;&#10;import android.os.Bundle;&#10;import android.provider.MediaStore;&#10;import android.text.Editable;&#10;import android.text.SpannableString;&#10;import android.text.Spanned;&#10;import android.text.TextWatcher;&#10;import android.text.method.LinkMovementMethod;&#10;import android.text.style.ClickableSpan;&#10;import android.text.style.ForegroundColorSpan;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.ArrayAdapter;&#10;import android.widget.AutoCompleteTextView;&#10;import android.widget.Button;&#10;import android.widget.CheckBox;&#10;import android.widget.EditText;&#10;import android.widget.FrameLayout;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.activity.result.ActivityResultLauncher;&#10;import androidx.activity.result.contract.ActivityResultContracts;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.Calendar;&#10;import java.util.Locale;&#10;&#10;public class RegisterActivity extends AppCompatActivity {&#10;&#10;    private static final String TAG = &quot;RegisterActivity&quot;;&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private TextInputEditText etFullName, etEmail, etPassword, etConfirmPassword;&#10;    private TextInputEditText etCccdNumber, etIdFullName, etDateOfBirth, etIssueDate, etIssuePlace;&#10;    private TextInputEditText etNationality, etPermanentAddress;&#10;    private AutoCompleteTextView actvGender;&#10;    private TextInputLayout tilDateOfBirth, tilIssueDate, tilGender;&#10;    private MaterialButton btnNext;&#10;    private Button btnContinue, btnVerify, btnLogin;&#10;    private ImageView ivBack, ivGoogleSignUp, ivFacebookSignUp;&#10;    private TextView tvLoginLink, tvUserEmail, tvResendCode;&#10;    private FrameLayout flFrontImage, flBackImage;&#10;    private ImageView ivFrontImage, ivBackImage;&#10;    private LinearLayout llFrontImagePlaceholder, llBackImagePlaceholder;&#10;    private CheckBox cbCommitment;&#10;    &#10;    // OTP fields&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;&#10;    private Calendar calendar;&#10;    private SimpleDateFormat dateFormatter;&#10;    private Uri frontImageUri, backImageUri;&#10;    private String userEmail; // Store user email for OTP verification&#10;&#10;    // Activity result launchers for camera and gallery&#10;    private ActivityResultLauncher&lt;Intent&gt; frontCameraLauncher;&#10;    private ActivityResultLauncher&lt;Intent&gt; backCameraLauncher;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_register);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Khởi tạo Calendar và định dạng ngày tháng&#10;        calendar = Calendar.getInstance();&#10;        dateFormatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;&#10;        // Khởi tạo ActivityResultLauncher cho chụp ảnh&#10;        setupImageCaptureLaunchers();&#10;&#10;        initViews();&#10;        setupGenderDropdown();&#10;        setupListeners();&#10;        setupLoginLink();&#10;        setupDatePickers();&#10;        setupImageCapture();&#10;    }&#10;&#10;    private void setupImageCaptureLaunchers() {&#10;        // Launcher cho hình ảnh mặt trước CCCD&#10;        frontCameraLauncher = registerForActivityResult(&#10;            new ActivityResultContracts.StartActivityForResult(),&#10;            result -&gt; {&#10;                if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                    // Xử lý hình ảnh được chụp&#10;                    Bundle extras = result.getData().getExtras();&#10;                    if (extras != null) {&#10;                        Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                        if (imageUri != null) {&#10;                            frontImageUri = imageUri;&#10;                            ivFrontImage.setImageURI(frontImageUri);&#10;                            ivFrontImage.setVisibility(View.VISIBLE);&#10;                            llFrontImagePlaceholder.setVisibility(View.GONE);&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        );&#10;&#10;        // Launcher cho hình ảnh mặt sau CCCD&#10;        backCameraLauncher = registerForActivityResult(&#10;            new ActivityResultContracts.StartActivityForResult(),&#10;            result -&gt; {&#10;                if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                    // Xử lý hình ảnh được chụp&#10;                    Bundle extras = result.getData().getExtras();&#10;                    if (extras != null) {&#10;                        Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                        if (imageUri != null) {&#10;                            backImageUri = imageUri;&#10;                            ivBackImage.setImageURI(backImageUri);&#10;                            ivBackImage.setVisibility(View.VISIBLE);&#10;                            llBackImagePlaceholder.setVisibility(View.GONE);&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        );&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;&#10;        // Ánh xạ các view từ layout đầu tiên (Thông tin cơ bản)&#10;        etFullName = findViewById(R.id.etFullName);&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        etConfirmPassword = findViewById(R.id.etConfirmPassword);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        ivGoogleSignUp = findViewById(R.id.ivGoogleSignUp);&#10;        ivFacebookSignUp = findViewById(R.id.ivFacebookSignUp);&#10;        tvLoginLink = findViewById(R.id.tvLoginLink);&#10;&#10;        // Ánh xạ các view từ layout thứ hai (Thông tin CCCD)&#10;        etCccdNumber = findViewById(R.id.etCccdNumber);&#10;        etIdFullName = findViewById(R.id.etIdFullName);&#10;        etDateOfBirth = findViewById(R.id.etDateOfBirth);&#10;        etIssueDate = findViewById(R.id.etIssueDate);&#10;        etIssuePlace = findViewById(R.id.etIssuePlace);&#10;        tilDateOfBirth = findViewById(R.id.tilDateOfBirth);&#10;        tilIssueDate = findViewById(R.id.tilIssueDate);&#10;&#10;        // Ánh xạ các trường mới được thêm vào&#10;        actvGender = findViewById(R.id.actvGender);&#10;        tilGender = findViewById(R.id.tilGender);&#10;        etNationality = findViewById(R.id.etNationality);&#10;        etPermanentAddress = findViewById(R.id.etPermanentAddress);&#10;&#10;        // Ánh xạ nút &quot;Tiếp tục&quot; trong layout CCCD info&#10;        btnContinue = findViewById(R.id.btnContinue);&#10;&#10;        // Ánh xạ nút quay lại dưới dạng mũi tên&#10;        ivBack = findViewById(R.id.ivBack);&#10;&#10;        // Ánh xạ các view cho hình ảnh&#10;        flFrontImage = findViewById(R.id.flFrontImage);&#10;        flBackImage = findViewById(R.id.flBackImage);&#10;        ivFrontImage = findViewById(R.id.ivFrontImage);&#10;        ivBackImage = findViewById(R.id.ivBackImage);&#10;        llFrontImagePlaceholder = findViewById(R.id.llFrontImagePlaceholder);&#10;        llBackImagePlaceholder = findViewById(R.id.llBackImagePlaceholder);&#10;&#10;        // Ánh xạ checkbox cam kết&#10;        cbCommitment = findViewById(R.id.cbCommitment);&#10;    }&#10;&#10;    private void setupGenderDropdown() {&#10;        // Thiết lập dropdown cho lựa chọn giới tính&#10;        String[] genderOptions = {&quot;Nam&quot;, &quot;Nữ&quot;, &quot;Khác&quot;};&#10;        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(&#10;            this,&#10;            android.R.layout.simple_dropdown_item_1line,&#10;            genderOptions&#10;        );&#10;        if (actvGender != null) {&#10;            actvGender.setAdapter(adapter);&#10;        }&#10;    }&#10;&#10;    private void setupImageCapture() {&#10;        // Thiết lập sự kiện khi nhấn vào khung chụp ảnh&#10;        if (flFrontImage != null) {&#10;            flFrontImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    frontCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                        &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                        Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;&#10;        if (flBackImage != null) {&#10;            flBackImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    backCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                        &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                        Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupListeners() {&#10;        // Back button (mũi tên quay về)&#10;        ivBack.setOnClickListener(v -&gt; {&#10;            // Quay về màn hình trước đó&#10;            if (viewFlipper.getDisplayedChild() &gt; 0) {&#10;                viewFlipper.showPrevious();&#10;            } else {&#10;                finish(); // Nếu đang ở màn hình đầu tiên, thoát activity&#10;            }&#10;        });&#10;&#10;        // Xử lý sự kiện nút Tiếp Tục ở màn hình thông tin cơ bản&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            if (validateBasicInfo()) {&#10;                // Tự động điền họ tên từ trang 1 sang trang 2&#10;                if (etIdFullName != null &amp;&amp; etFullName != null) {&#10;                    etIdFullName.setText(etFullName.getText().toString().trim());&#10;                }&#10;                viewFlipper.showNext(); // Chuyển sang trang thông tin CCCD&#10;            }&#10;        });&#10;&#10;        // Xử lý sự kiện nút Tiếp Tục ở màn hình thông tin CCCD&#10;        if (btnContinue != null) {&#10;            btnContinue.setOnClickListener(v -&gt; {&#10;                if (validateCccdInfo()) {&#10;                    // Lưu email để hiển thị trên màn hình Check Email&#10;                    userEmail = etEmail.getText().toString().trim();&#10;                    &#10;                    // Chuyển sang màn hình check email&#10;                    viewFlipper.setDisplayedChild(2); // Index 2 is the Check Email layout&#10;                    &#10;                    // Gửi OTP qua email&#10;                    sendOTPToEmail(userEmail);&#10;                    &#10;                    // Cập nhật UI cho màn hình check email sau khi chuyển sang&#10;                    setupCheckEmailScreen();&#10;                }&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình Check Email&#10;    private void setupCheckEmailScreen() {&#10;        // Ánh xạ các view trong màn hình check email&#10;        TextView tvTitle = findViewById(R.id.tvTitle);&#10;        TextView tvDescription = findViewById(R.id.tvDescription);&#10;        tvUserEmail = findViewById(R.id.tvUserEmail);&#10;        Button btnEmailContinue = findViewById(R.id.btnContinue);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvTitle != null) {&#10;            tvTitle.setText(R.string.register_check_email);&#10;        }&#10;        &#10;        if (tvDescription != null) {&#10;            tvDescription.setText(R.string.register_check_email_description);&#10;        }&#10;        &#10;        // Hiển thị email của người dùng&#10;        if (tvUserEmail != null) {&#10;            tvUserEmail.setText(userEmail);&#10;        }&#10;        &#10;        // Quan trọng: thiết lập sự kiện cho nút tiếp tục&#10;        if (btnEmailContinue != null) {&#10;            Log.d(TAG, &quot;Setting up continue button in check email screen&quot;);&#10;            btnEmailContinue.setOnClickListener(new View.OnClickListener() {&#10;                @Override&#10;                public void onClick(View v) {&#10;                    Log.d(TAG, &quot;Check email continue button clicked&quot;);&#10;                    // Chuyển sang màn hình nhập OTP&#10;                    viewFlipper.setDisplayedChild(3);&#10;                    // Thiết lập màn hình OTP&#10;                    setupOtpScreen();&#10;                }&#10;            });&#10;        } else {&#10;            Log.e(TAG, &quot;btnEmailContinue is null&quot;);&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình OTP&#10;    private void setupOtpScreen() {&#10;        // Ánh xạ các view trong màn hình OTP&#10;        TextView tvTitle = findViewById(R.id.tvTitle);&#10;        TextView tvDescription = findViewById(R.id.tvDescription);&#10;        etOtp1 = findViewById(R.id.etOtp1);&#10;        etOtp2 = findViewById(R.id.etOtp2);&#10;        etOtp3 = findViewById(R.id.etOtp3);&#10;        etOtp4 = findViewById(R.id.etOtp4);&#10;        etOtp5 = findViewById(R.id.etOtp5);&#10;        etOtp6 = findViewById(R.id.etOtp6);&#10;        tvResendCode = findViewById(R.id.tvResendCode);&#10;        btnVerify = findViewById(R.id.btnVerify);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvTitle != null) {&#10;            tvTitle.setText(R.string.register_enter_otp);&#10;        }&#10;        &#10;        if (tvDescription != null) {&#10;            tvDescription.setText(R.string.register_otp_description);&#10;        }&#10;        &#10;        // Thiết lập TextWatcher cho các trường OTP&#10;        setupOtpTextWatchers();&#10;        &#10;        // Thiết lập sự kiện cho nút xác nhận OTP&#10;        if (btnVerify != null) {&#10;            btnVerify.setOnClickListener(v -&gt; {&#10;                if (validateOTP()) {&#10;                    // Xác thực OTP thành công, chuyển sang màn hình thành công&#10;                    viewFlipper.setDisplayedChild(4); // Index 4 is the Success layout&#10;                    // Thiết lập màn hình thành công&#10;                    setupSuccessScreen();&#10;                }&#10;            });&#10;        }&#10;        &#10;        // Thiết lập sự kiện cho nút gửi lại mã&#10;        if (tvResendCode != null) {&#10;            tvResendCode.setOnClickListener(v -&gt; {&#10;                sendOTPToEmail(userEmail);&#10;                Toast.makeText(RegisterActivity.this, &quot;Đã gửi lại mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình thành công&#10;    private void setupSuccessScreen() {&#10;        // Ánh xạ các view trong màn hình thành công&#10;        TextView tvSuccessTitle = findViewById(R.id.tvSuccessTitle);&#10;        TextView tvSuccessDescription = findViewById(R.id.tvSuccessDescription);&#10;        btnLogin = findViewById(R.id.btnLogin);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvSuccessTitle != null) {&#10;            tvSuccessTitle.setText(R.string.registration_success);&#10;        }&#10;        &#10;        if (tvSuccessDescription != null) {&#10;            tvSuccessDescription.setText(R.string.registration_success_description);&#10;        }&#10;        &#10;        // Thiết lập sự kiện cho nút đăng nhập&#10;        if (btnLogin != null) {&#10;            btnLogin.setOnClickListener(v -&gt; {&#10;                // Đăng ký tài khoản&#10;                registerAccount();&#10;                &#10;                // Chuyển đến màn hình đăng nhập&#10;                Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);&#10;                startActivity(intent);&#10;                finish();&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Thiết lập TextWatcher cho các trường OTP&#10;    private void setupOtpTextWatchers() {&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || &#10;            etOtp4 == null || etOtp5 == null || etOtp6 == null) {&#10;            return;&#10;        }&#10;        &#10;        etOtp1.addTextChangedListener(new OTPTextWatcher(etOtp1, etOtp2));&#10;        etOtp2.addTextChangedListener(new OTPTextWatcher(etOtp2, etOtp3));&#10;        etOtp3.addTextChangedListener(new OTPTextWatcher(etOtp3, etOtp4));&#10;        etOtp4.addTextChangedListener(new OTPTextWatcher(etOtp4, etOtp5));&#10;        etOtp5.addTextChangedListener(new OTPTextWatcher(etOtp5, etOtp6));&#10;        etOtp6.addTextChangedListener(new OTPTextWatcher(etOtp6, null));&#10;    }&#10;&#10;    private void setupDatePickers() {&#10;        // Thiết lập DatePicker cho ngày sinh&#10;        if (etDateOfBirth != null) {&#10;            etDateOfBirth.setOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            tilDateOfBirth.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;        }&#10;&#10;        // Thiết lập DatePicker cho ngày cấp&#10;        if (etIssueDate != null) {&#10;            etIssueDate.setOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            tilIssueDate.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;        }&#10;    }&#10;&#10;    private void showDatePickerDialog(final TextInputEditText editText) {&#10;        Calendar currentCalendar = Calendar.getInstance();&#10;&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, year, month, dayOfMonth) -&gt; {&#10;                    Calendar selectedCalendar = Calendar.getInstance();&#10;                    selectedCalendar.set(year, month, dayOfMonth);&#10;                    String formattedDate = dateFormatter.format(selectedCalendar.getTime());&#10;                    editText.setText(formattedDate);&#10;                },&#10;                currentCalendar.get(Calendar.YEAR),&#10;                currentCalendar.get(Calendar.MONTH),&#10;                currentCalendar.get(Calendar.DAY_OF_MONTH)&#10;        );&#10;&#10;        // Giới hạn tuổi từ 18-100 cho ngày sinh&#10;        if (editText == etDateOfBirth) {&#10;            Calendar minAge = Calendar.getInstance();&#10;            Calendar maxAge = Calendar.getInstance();&#10;            minAge.add(Calendar.YEAR, -100);  // 100 tuổi&#10;            maxAge.add(Calendar.YEAR, -18);   // 18 tuổi&#10;            datePickerDialog.getDatePicker().setMaxDate(maxAge.getTimeInMillis());&#10;            datePickerDialog.getDatePicker().setMinDate(minAge.getTimeInMillis());&#10;        }&#10;&#10;        // Giới hạn ngày cấp không quá hiện tại&#10;        if (editText == etIssueDate) {&#10;            datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        }&#10;&#10;        datePickerDialog.show();&#10;    }&#10;&#10;    private void setupLoginLink() {&#10;        // Make 'Đăng nhập' clickable and colored&#10;        String text = &quot;Đã có tài khoản? Đăng nhập&quot;;&#10;        SpannableString ss = new SpannableString(text);&#10;        int start = text.indexOf(&quot;Đăng nhập&quot;);&#10;        int end = start + &quot;Đăng nhập&quot;.length();&#10;        ss.setSpan(new ClickableSpan() {&#10;            @Override&#10;            public void onClick(View widget) {&#10;                Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);&#10;                startActivity(intent);&#10;                finish();&#10;            }&#10;        }, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        ss.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.colorPrimary)), start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        tvLoginLink.setText(ss);&#10;        tvLoginLink.setMovementMethod(LinkMovementMethod.getInstance());&#10;    }&#10;&#10;    private boolean validateBasicInfo() {&#10;        boolean isValid = true;&#10;&#10;        String fullName = etFullName.getText().toString().trim();&#10;        String email = etEmail.getText().toString().trim();&#10;        String password = etPassword.getText().toString().trim();&#10;        String confirmPassword = etConfirmPassword.getText().toString().trim();&#10;&#10;        // Validate fullName&#10;        if (fullName.isEmpty()) {&#10;            etFullName.setError(&quot;Vui lòng nhập họ tên&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate email&#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Vui lòng nhập email&quot;);&#10;            isValid = false;&#10;        } else if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            etEmail.setError(&quot;Email không hợp lệ&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate password&#10;        if (password.isEmpty()) {&#10;            etPassword.setError(&quot;Vui lòng nhập mật khẩu&quot;);&#10;            isValid = false;&#10;        } else if (password.length() &lt; 6) {&#10;            etPassword.setError(&quot;Mật khẩu phải có ít nhất 6 ký tự&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate confirmPassword&#10;        if (confirmPassword.isEmpty()) {&#10;            etConfirmPassword.setError(&quot;Vui lòng xác nhận mật khẩu&quot;);&#10;            isValid = false;&#10;        } else if (!confirmPassword.equals(password)) {&#10;            etConfirmPassword.setError(&quot;Mật khẩu xác nhận không khớp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    private boolean validateCccdInfo() {&#10;        boolean isValid = true;&#10;&#10;        String cccdNumber = etCccdNumber.getText().toString().trim();&#10;        String idFullName = etIdFullName.getText().toString().trim();&#10;        String dateOfBirth = etDateOfBirth.getText().toString().trim();&#10;        String issueDate = etIssueDate.getText().toString().trim();&#10;        String issuePlace = etIssuePlace.getText().toString().trim();&#10;        String gender = actvGender.getText().toString().trim();&#10;        String nationality = etNationality.getText().toString().trim();&#10;        String permanentAddress = etPermanentAddress.getText().toString().trim();&#10;&#10;        // Validate CCCD number&#10;        if (cccdNumber.isEmpty()) {&#10;            etCccdNumber.setError(&quot;Vui lòng nhập số CCCD/CMND&quot;);&#10;            isValid = false;&#10;        } else if (cccdNumber.length() != 9 &amp;&amp; cccdNumber.length() != 12) {&#10;            etCccdNumber.setError(&quot;Số CCCD phải có 12 chữ số hoặc CMND phải có 9 chữ số&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate ID full name&#10;        if (idFullName.isEmpty()) {&#10;            etIdFullName.setError(&quot;Vui lòng nhập họ tên trên CCCD/CMND&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate date of birth&#10;        if (dateOfBirth.isEmpty()) {&#10;            etDateOfBirth.setError(&quot;Vui lòng chọn ngày sinh&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate gender&#10;        if (gender.isEmpty()) {&#10;            ((TextView)actvGender).setError(&quot;Vui lòng chọn giới tính&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate nationality&#10;        if (nationality.isEmpty()) {&#10;            etNationality.setError(&quot;Vui lòng nhập quốc tịch&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate permanent address&#10;        if (permanentAddress.isEmpty()) {&#10;            etPermanentAddress.setError(&quot;Vui lòng nhập địa chỉ thường trú&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate issue date&#10;        if (issueDate.isEmpty()) {&#10;            etIssueDate.setError(&quot;Vui lòng chọn ngày cấp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate issue place&#10;        if (issuePlace.isEmpty()) {&#10;            etIssuePlace.setError(&quot;Vui lòng nhập nơi cấp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate ID images - ĐÃ TẮT CHO MỤC ĐÍCH PHÁT TRIỂN&#10;        /*&#10;        if (frontImageUri == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chụp ảnh mặt trước CCCD/CMND&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;&#10;        if (backImageUri == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chụp ảnh mặt sau CCCD/CMND&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;        */&#10;&#10;        // Validate commitment checkbox&#10;        if (cbCommitment != null &amp;&amp; !cbCommitment.isChecked()) {&#10;            Toast.makeText(this, &quot;Vui lòng xác nhận cam kết về tính chính xác của thông tin&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;    &#10;    private boolean validateOTP() {&#10;        // Check if all OTP fields are filled&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || &#10;            etOtp4 == null || etOtp5 == null || etOtp6 == null) {&#10;            return false;&#10;        }&#10;        &#10;        String otp1 = etOtp1.getText().toString();&#10;        String otp2 = etOtp2.getText().toString();&#10;        String otp3 = etOtp3.getText().toString();&#10;        String otp4 = etOtp4.getText().toString();&#10;        String otp5 = etOtp5.getText().toString();&#10;        String otp6 = etOtp6.getText().toString();&#10;        &#10;        if (otp1.isEmpty() || otp2.isEmpty() || otp3.isEmpty() || &#10;            otp4.isEmpty() || otp5.isEmpty() || otp6.isEmpty()) {&#10;            Toast.makeText(this, &quot;Vui lòng nhập đầy đủ mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        &#10;        // For demo purposes, any 6-digit code is valid&#10;        // In a real application, you would verify the OTP against a backend service&#10;        return true;&#10;    }&#10;    &#10;    private void sendOTPToEmail(String email) {&#10;        // This is a placeholder for the actual OTP sending functionality&#10;        // In a real application, this would call an API to send the OTP to the user's email&#10;        Toast.makeText(this, &quot;Đã gửi mã OTP đến email: &quot; + email, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void registerAccount() {&#10;        String fullName = etFullName.getText().toString().trim();&#10;        String email = etEmail.getText().toString().trim();&#10;        String password = etPassword.getText().toString().trim();&#10;        String cccdNumber = etCccdNumber.getText().toString().trim();&#10;        String idFullName = etIdFullName.getText().toString().trim();&#10;        String dateOfBirth = etDateOfBirth.getText().toString().trim();&#10;        String issueDate = etIssueDate.getText().toString().trim();&#10;        String issuePlace = etIssuePlace.getText().toString().trim();&#10;        String gender = actvGender.getText().toString().trim();&#10;        String nationality = etNationality.getText().toString().trim();&#10;        String permanentAddress = etPermanentAddress.getText().toString().trim();&#10;&#10;        // TODO: Gửi thông tin đăng ký đến API hoặc lưu vào cơ sở dữ liệu cục bộ&#10;&#10;        // Log để debug&#10;        String registrationInfo = &quot;Họ tên: &quot; + fullName + &quot;\n&quot; +&#10;                                 &quot;Email: &quot; + email + &quot;\n&quot; +&#10;                                 &quot;Số CCCD: &quot; + cccdNumber + &quot;\n&quot; +&#10;                                 &quot;Tên trên CCCD: &quot; + idFullName + &quot;\n&quot; +&#10;                                 &quot;Ngày sinh: &quot; + dateOfBirth + &quot;\n&quot; +&#10;                                 &quot;Giới tính: &quot; + gender + &quot;\n&quot; +&#10;                                 &quot;Quốc tịch: &quot; + nationality + &quot;\n&quot; +&#10;                                 &quot;Địa chỉ thường trú: &quot; + permanentAddress + &quot;\n&quot; +&#10;                                 &quot;Ngày cấp: &quot; + issueDate + &quot;\n&quot; +&#10;                                 &quot;Nơi cấp: &quot; + issuePlace;&#10;&#10;        // In thông tin ra Logcat để kiểm tra&#10;        Log.d(TAG, &quot;Registered account: &quot; + registrationInfo);&#10;    }&#10;    &#10;    // Inner class for OTP text change handling&#10;    private class OTPTextWatcher implements TextWatcher {&#10;        private EditText currentEditText;&#10;        private EditText nextEditText;&#10;        &#10;        public OTPTextWatcher(EditText currentEditText, EditText nextEditText) {&#10;            this.currentEditText = currentEditText;&#10;            this.nextEditText = nextEditText;&#10;        }&#10;        &#10;        @Override&#10;        public void beforeTextChanged(CharSequence s, int start, int count, int after) {&#10;        }&#10;        &#10;        @Override&#10;        public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;        }&#10;        &#10;        @Override&#10;        public void afterTextChanged(Editable s) {&#10;            if (s.length() == 1 &amp;&amp; nextEditText != null) {&#10;                nextEditText.requestFocus();&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/SigninActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/SigninActivity.java" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.view.View;&#10;import android.widget.CheckBox;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.parkmate.android.R;&#10;&#10;public class SigninActivity extends AppCompatActivity {&#10;    &#10;    private TextInputEditText etEmail, etPassword;&#10;    private CheckBox cbRememberMe;&#10;    private MaterialButton btnLogin;&#10;    private TextView tvRegisterLink, tvForgotPassword;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.layout_login);&#10;        &#10;        // Initialize views&#10;        initViews();&#10;        &#10;        // Setup click listeners&#10;        setupClickListeners();&#10;        &#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(android.R.id.content), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;    }&#10;    &#10;    private void initViews() {&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        cbRememberMe = findViewById(R.id.cbRememberMe);&#10;        btnLogin = findViewById(R.id.btnLogin);&#10;        tvRegisterLink = findViewById(R.id.tvRegisterLink);&#10;        tvForgotPassword = findViewById(R.id.tvForgotPassword);&#10;    }&#10;    &#10;    private void setupClickListeners() {&#10;        // Register link click listener&#10;        tvRegisterLink.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Navigate to register screen&#10;                Intent intent = new Intent(SigninActivity.this, RegisterActivity.class);&#10;                startActivity(intent);&#10;            }&#10;        });&#10;        &#10;        // Login button click listener&#10;        btnLogin.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Implement login logic here&#10;                String email = etEmail.getText().toString().trim();&#10;                String password = etPassword.getText().toString().trim();&#10;                boolean rememberMe = cbRememberMe.isChecked();&#10;                &#10;                if (validateInput(email, password)) {&#10;                    performLogin(email, password, rememberMe);&#10;                }&#10;            }&#10;        });&#10;        &#10;        // Forgot password click listener&#10;        tvForgotPassword.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Implement forgot password logic here&#10;                Toast.makeText(SigninActivity.this, &quot;Chức năng đặt lại mật khẩu sẽ được triển khai sau&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        });&#10;    }&#10;    &#10;    private boolean validateInput(String email, String password) {&#10;        boolean isValid = true;&#10;        &#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Vui lòng nhập email&quot;);&#10;            isValid = false;&#10;        }&#10;        &#10;        if (password.isEmpty()) {&#10;            etPassword.setError(&quot;Vui lòng nhập mật khẩu&quot;);&#10;            isValid = false;&#10;        }&#10;        &#10;        return isValid;&#10;    }&#10;    &#10;    private void performLogin(String email, String password, boolean rememberMe) {&#10;        // TODO: Implement actual login logic with your API or Firebase&#10;        // This is just a placeholder&#10;        Toast.makeText(this, &quot;Đang đăng nhập...&quot;, Toast.LENGTH_SHORT).show();&#10;        &#10;        // If remember me is checked, save credentials to SharedPreferences&#10;        if (rememberMe) {&#10;            // TODO: Save login credentials or token securely&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/utils/UserManager.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/utils/UserManager.java" />
              <option name="originalContent" value="package com.parkmate.android.utils;&#10;&#10;import android.content.Context;&#10;import android.content.SharedPreferences;&#10;import android.text.TextUtils;&#10;&#10;/**&#10; * Quản lý lưu trữ và truy xuất thông tin user đã đăng nhập&#10; */&#10;public final class UserManager {&#10;&#10;    private static final String PREF_NAME = &quot;user_prefs&quot;;&#10;    private static final String KEY_USER_ID = &quot;user_id&quot;;&#10;    private static final String KEY_USER_EMAIL = &quot;user_email&quot;;&#10;    private static final String KEY_USER_NAME = &quot;user_name&quot;;&#10;&#10;    private static UserManager instance;&#10;    private final SharedPreferences prefs;&#10;&#10;    private UserManager(Context appContext) {&#10;        this.prefs = appContext.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE);&#10;    }&#10;&#10;    /**&#10;     * Gọi từ Application.onCreate() để khởi tạo.&#10;     */&#10;    public static synchronized void init(Context context) {&#10;        if (instance == null) {&#10;            instance = new UserManager(context.getApplicationContext());&#10;        }&#10;    }&#10;&#10;    public static UserManager getInstance() {&#10;        if (instance == null) {&#10;            throw new IllegalStateException(&quot;UserManager chưa được init. Hãy gọi UserManager.init(context) trong Application.&quot;);&#10;        }&#10;        return instance;&#10;    }&#10;&#10;    /**&#10;     * Lưu thông tin user sau khi đăng nhập thành công&#10;     */&#10;    public void saveUserInfo(String userId, String email, String name) {&#10;        SharedPreferences.Editor editor = prefs.edit();&#10;        if (userId != null) editor.putString(KEY_USER_ID, userId);&#10;        if (email != null) editor.putString(KEY_USER_EMAIL, email);&#10;        if (name != null) editor.putString(KEY_USER_NAME, name);&#10;        editor.apply();&#10;    }&#10;&#10;    public String getUserId() {&#10;        return prefs.getString(KEY_USER_ID, null);&#10;    }&#10;&#10;    public String getUserEmail() {&#10;        return prefs.getString(KEY_USER_EMAIL, null);&#10;    }&#10;&#10;    public String getUserName() {&#10;        String name = prefs.getString(KEY_USER_NAME, null);&#10;        return TextUtils.isEmpty(name) ? &quot;Người dùng ParkMate&quot; : name;&#10;    }&#10;&#10;    /**&#10;     * Xóa toàn bộ thông tin user (khi logout)&#10;     */&#10;    public void clearUserInfo() {&#10;        prefs.edit()&#10;                .remove(KEY_USER_ID)&#10;                .remove(KEY_USER_EMAIL)&#10;                .remove(KEY_USER_NAME)&#10;                .apply();&#10;    }&#10;&#10;    /**&#10;     * Kiểm tra xem có user đã đăng nhập hay chưa&#10;     */&#10;    public boolean isLoggedIn() {&#10;        return !TextUtils.isEmpty(getUserId()) || !TextUtils.isEmpty(getUserEmail());&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.parkmate.android.utils;&#13;&#10;&#13;&#10;import android.content.Context;&#13;&#10;import android.content.SharedPreferences;&#13;&#10;import android.text.TextUtils;&#13;&#10;&#13;&#10;/**&#13;&#10; * Quản lý lưu trữ và truy xuất thông tin user đã đăng nhập&#13;&#10; */&#13;&#10;public final class UserManager {&#13;&#10;&#13;&#10;    private static final String PREF_NAME = &quot;user_prefs&quot;;&#13;&#10;    private static final String KEY_USER_ID = &quot;user_id&quot;;&#13;&#10;    private static final String KEY_USER_EMAIL = &quot;user_email&quot;;&#13;&#10;    private static final String KEY_USER_NAME = &quot;user_name&quot;;&#13;&#10;    private static final String KEY_USERNAME = &quot;username&quot;; // Thêm key cho username&#13;&#10;&#13;&#10;    private static UserManager instance;&#13;&#10;    private final SharedPreferences prefs;&#13;&#10;&#13;&#10;    private UserManager(Context appContext) {&#13;&#10;        this.prefs = appContext.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE);&#13;&#10;    }&#13;&#10;&#13;&#10;    /**&#13;&#10;     * Gọi từ Application.onCreate() để khởi tạo.&#13;&#10;     */&#13;&#10;    public static synchronized void init(Context context) {&#13;&#10;        if (instance == null) {&#13;&#10;            instance = new UserManager(context.getApplicationContext());&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public static UserManager getInstance() {&#13;&#10;        if (instance == null) {&#13;&#10;            throw new IllegalStateException(&quot;UserManager chưa được init. Hãy gọi UserManager.init(context) trong Application.&quot;);&#13;&#10;        }&#13;&#10;        return instance;&#13;&#10;    }&#13;&#10;&#13;&#10;    /**&#13;&#10;     * Lưu thông tin user sau khi đăng nhập thành công&#13;&#10;     */&#13;&#10;    public void saveUserInfo(String userId, String email, String name) {&#13;&#10;        SharedPreferences.Editor editor = prefs.edit();&#13;&#10;        if (userId != null) editor.putString(KEY_USER_ID, userId);&#13;&#10;        if (email != null) editor.putString(KEY_USER_EMAIL, email);&#13;&#10;        if (name != null) editor.putString(KEY_USER_NAME, name);&#13;&#10;        editor.apply();&#13;&#10;    }&#13;&#10;&#13;&#10;    public String getUserId() {&#13;&#10;        return prefs.getString(KEY_USER_ID, null);&#13;&#10;    }&#13;&#10;&#13;&#10;    public String getUserEmail() {&#13;&#10;        return prefs.getString(KEY_USER_EMAIL, null);&#13;&#10;    }&#13;&#10;&#13;&#10;    public String getUserName() {&#13;&#10;        String name = prefs.getString(KEY_USER_NAME, null);&#13;&#10;        return TextUtils.isEmpty(name) ? &quot;Người dùng ParkMate&quot; : name;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setUsername(String username) {&#13;&#10;        SharedPreferences.Editor editor = prefs.edit();&#13;&#10;        editor.putString(KEY_USERNAME, username);&#13;&#10;        editor.apply();&#13;&#10;    }&#13;&#10;&#13;&#10;    public String getUsername() {&#13;&#10;        return prefs.getString(KEY_USERNAME, null);&#13;&#10;    }&#13;&#10;&#13;&#10;    /**&#13;&#10;     * Xóa toàn bộ thông tin user (khi logout)&#13;&#10;     */&#13;&#10;    public void clearUserInfo() {&#13;&#10;        prefs.edit()&#13;&#10;                .remove(KEY_USER_ID)&#13;&#10;                .remove(KEY_USER_EMAIL)&#13;&#10;                .remove(KEY_USER_NAME)&#13;&#10;                .remove(KEY_USERNAME) // Xóa username khi logout&#13;&#10;                .apply();&#13;&#10;    }&#13;&#10;&#13;&#10;    /**&#13;&#10;     * Kiểm tra xem có user đã đăng nhập hay chưa&#13;&#10;     */&#13;&#10;    public boolean isLoggedIn() {&#13;&#10;        return !TextUtils.isEmpty(getUserId()) || !TextUtils.isEmpty(getUserEmail());&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_parking.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_parking.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvParkingPlaceholder&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Màn hình Bãi đỗ xe&quot;&#10;        android:textSize=&quot;18sp&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/component_layer_3598897.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/component_layer_3598897.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;&#10;    &lt;!-- This component represents the &quot;3598897 1&quot; layer from Zeplin. Replace ic_launcher_foreground with your actual asset if needed. --&gt;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/layer3598897&quot;&#10;        android:layout_width=&quot;120dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:src=&quot;@drawable/ic_launcher_foreground&quot;&#10;        android:contentDescription=&quot;@string/splash_logo_desc&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&#10;        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;&#10;        app:layout_constraintRight_toRightOf=&quot;parent&quot;&#10;        /&gt;&#10;&lt;/merge&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/layout_cccd_info.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/layout_cccd_info.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:fillViewport=&quot;true&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;@color/white&quot;&gt;  &lt;!-- added background --&gt;&gt;&#10;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;#FFFFFF&quot;&#10;    android:paddingBottom=&quot;32dp&quot;&gt;&#10;&#10;    &lt;!-- CCCD Title --&gt;&#10;&#10;    &lt;!-- Subtitle --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvCccdTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;72dp&quot;&#10;        android:text=&quot;Thông Tin CCCD&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;24sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintHorizontal_bias=&quot;0.497&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvCccdSubtitle&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:text=&quot;Vui lòng nhập thông tin CCCD/CMND để xác thực tài khoản&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvCccdTitle&quot; /&gt;&#10;&#10;    &lt;!-- CCCD Number Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilCccdNumber&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvCccdSubtitle&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etCccdNumber&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Số CCCD/CMND&quot;&#10;            android:inputType=&quot;number&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Full Name Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIdFullName&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilCccdNumber&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIdFullName&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Họ và tên trên CCCD/CMND&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Gender Field - NEW --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilGender&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIdFullName&quot;&gt;&#10;&#10;        &lt;AutoCompleteTextView&#10;            android:id=&quot;@+id/actvGender&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Giới tính&quot;&#10;            android:inputType=&quot;none&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Date of Birth --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilDateOfBirth&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilGender&quot;&#10;        app:endIconDrawable=&quot;@drawable/ic_calendar&quot;&#10;        app:endIconMode=&quot;custom&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etDateOfBirth&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày sinh&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Nationality Field - NEW --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilNationality&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilDateOfBirth&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etNationality&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Quốc tịch&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Permanent Address Field - NEW --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilPermanentAddress&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilNationality&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etPermanentAddress&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Địa chỉ thường trú&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- CCCD Issue Date Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssueDate&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPermanentAddress&quot;&#10;        app:endIconDrawable=&quot;@drawable/ic_calendar&quot;&#10;        app:endIconMode=&quot;custom&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssueDate&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày cấp&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Place Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssuePlace&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssueDate&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssuePlace&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Nơi cấp&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- CCCD Front Image Upload - NEW --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvUploadTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:text=&quot;Hình ảnh CCCD/CMND&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssuePlace&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvFrontImageTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:text=&quot;Mặt trước CCCD/CMND&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvUploadTitle&quot; /&gt;&#10;&#10;    &lt;FrameLayout&#10;        android:id=&quot;@+id/flFrontImage&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;180dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvFrontImageTitle&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivFrontImage&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;match_parent&quot;&#10;            android:scaleType=&quot;centerInside&quot;&#10;            android:contentDescription=&quot;Front side of ID&quot; /&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:id=&quot;@+id/llFrontImagePlaceholder&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_gravity=&quot;center&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:gravity=&quot;center&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:layout_width=&quot;48dp&quot;&#10;                android:layout_height=&quot;48dp&quot;&#10;                android:src=&quot;@drawable/ic_camera&quot;&#10;                android:contentDescription=&quot;Camera icon&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:text=&quot;Chụp ảnh mặt trước&quot;&#10;                android:textColor=&quot;#8F9BB3&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/FrameLayout&gt;&#10;&#10;    &lt;!-- CCCD Back Image Upload - NEW --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvBackImageTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:text=&quot;Mặt sau CCCD/CMND&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/flFrontImage&quot; /&gt;&#10;&#10;    &lt;FrameLayout&#10;        android:id=&quot;@+id/flBackImage&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;180dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvBackImageTitle&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivBackImage&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;match_parent&quot;&#10;            android:scaleType=&quot;centerInside&quot;&#10;            android:contentDescription=&quot;Back side of ID&quot; /&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:id=&quot;@+id/llBackImagePlaceholder&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_gravity=&quot;center&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:gravity=&quot;center&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:layout_width=&quot;48dp&quot;&#10;                android:layout_height=&quot;48dp&quot;&#10;                android:src=&quot;@drawable/ic_camera&quot;&#10;                android:contentDescription=&quot;Camera icon&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:text=&quot;Chụp ảnh mặt sau&quot;&#10;                android:textColor=&quot;#8F9BB3&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/FrameLayout&gt;&#10;&#10;    &lt;!-- Commitment Checkbox - NEW --&gt;&#10;    &lt;CheckBox&#10;        android:id=&quot;@+id/cbCommitment&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:text=&quot;Tôi cam kết thông tin trên là đúng và chịu trách nhiệm về tính chính xác của thông tin đã cung cấp&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/flBackImage&quot; /&gt;&#10;&#10;    &lt;!-- Register Button (Changed to Continue) --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnContinue&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#10;        android:paddingVertical=&quot;12dp&quot;&#10;        android:text=&quot;Tiếp Tục&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        app:cornerRadius=&quot;24dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/cbCommitment&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;&#10;&lt;/androidx.core.widget.NestedScrollView&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:fillViewport=&quot;true&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;@color/white&quot;&gt;  &lt;!-- added background --&gt;&gt;&#10;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;#FFFFFF&quot;&#10;    android:paddingBottom=&quot;32dp&quot;&gt;&#10;&#10;    &lt;!-- CCCD Title --&gt;&#10;&#10;    &lt;!-- Subtitle --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvCccdTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;72dp&quot;&#10;        android:text=&quot;Thông Tin CCCD&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;24sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintHorizontal_bias=&quot;0.497&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvCccdSubtitle&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:text=&quot;Vui lòng nhập thông tin CCCD/CMND để xác thực tài khoản&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvCccdTitle&quot; /&gt;&#10;&#10;    &lt;!-- CCCD Number Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilCccdNumber&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvCccdSubtitle&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etCccdNumber&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Số CCCD/CMND&quot;&#10;            android:inputType=&quot;number&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- First Name Field - NEW --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilFirstName&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilCccdNumber&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etFirstName&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Họ và tên đệm&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Last Name Field - NEW --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilLastName&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilFirstName&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etLastName&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Tên&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Gender Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilGender&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilLastName&quot;&gt;&#10;&#10;        &lt;AutoCompleteTextView&#10;            android:id=&quot;@+id/actvGender&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Giới tính&quot;&#10;            android:inputType=&quot;none&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Date of Birth --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilDateOfBirth&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilGender&quot;&#10;        app:endIconDrawable=&quot;@drawable/ic_calendar&quot;&#10;        app:endIconMode=&quot;custom&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etDateOfBirth&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày sinh&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Nationality Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilNationality&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilDateOfBirth&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etNationality&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Quốc tịch&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Permanent Address Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilPermanentAddress&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilNationality&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etPermanentAddress&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Địa chỉ thường trú&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- CCCD Issue Date Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssueDate&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPermanentAddress&quot;&#10;        app:endIconDrawable=&quot;@drawable/ic_calendar&quot;&#10;        app:endIconMode=&quot;custom&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssueDate&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày cấp&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Place Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssuePlace&quot;&#10;        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssueDate&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssuePlace&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Nơi cấp&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- PHẦN CHỤP ẢNH BỊ ẨN (VISIBILITY GONE) --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvUploadTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:text=&quot;Hình ảnh CCCD/CMND&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssuePlace&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvFrontImageTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:text=&quot;Mặt trước CCCD/CMND&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvUploadTitle&quot; /&gt;&#10;&#10;    &lt;FrameLayout&#10;        android:id=&quot;@+id/flFrontImage&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;180dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvFrontImageTitle&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivFrontImage&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;match_parent&quot;&#10;            android:scaleType=&quot;centerInside&quot;&#10;            android:contentDescription=&quot;Front side of ID&quot; /&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:id=&quot;@+id/llFrontImagePlaceholder&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_gravity=&quot;center&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:gravity=&quot;center&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:layout_width=&quot;48dp&quot;&#10;                android:layout_height=&quot;48dp&quot;&#10;                android:src=&quot;@drawable/ic_camera&quot;&#10;                android:contentDescription=&quot;Camera icon&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:text=&quot;Chụp ảnh mặt trước&quot;&#10;                android:textColor=&quot;#8F9BB3&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/FrameLayout&gt;&#10;&#10;    &lt;!-- CCCD Back Image Upload - NEW --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvBackImageTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:text=&quot;Mặt sau CCCD/CMND&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/flFrontImage&quot; /&gt;&#10;&#10;    &lt;FrameLayout&#10;        android:id=&quot;@+id/flBackImage&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;180dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvBackImageTitle&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivBackImage&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;match_parent&quot;&#10;            android:scaleType=&quot;centerInside&quot;&#10;            android:contentDescription=&quot;Back side of ID&quot; /&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:id=&quot;@+id/llBackImagePlaceholder&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_gravity=&quot;center&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:gravity=&quot;center&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:layout_width=&quot;48dp&quot;&#10;                android:layout_height=&quot;48dp&quot;&#10;                android:src=&quot;@drawable/ic_camera&quot;&#10;                android:contentDescription=&quot;Camera icon&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:text=&quot;Chụp ảnh mặt sau&quot;&#10;                android:textColor=&quot;#8F9BB3&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/FrameLayout&gt;&#10;&#10;    &lt;!-- Commitment Checkbox --&gt;&#10;    &lt;CheckBox&#10;        android:id=&quot;@+id/cbCommitment&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:text=&quot;Tôi cam kết thông tin trên là đúng và chịu trách nhiệm về tính chính xác của thông tin đã cung cấp&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssuePlace&quot; /&gt;&#10;&#10;    &lt;!-- Register Button (Changed to Continue) --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnContinue&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#10;        android:paddingVertical=&quot;12dp&quot;&#10;        android:text=&quot;Tiếp Tục&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        app:cornerRadius=&quot;24dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/cbCommitment&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;&#10;&lt;/androidx.core.widget.NestedScrollView&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/layout_register_basic_info.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/layout_register_basic_info.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#10;&#10;    &lt;!-- Sign Up Title --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvSignUpTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;48dp&quot;&#10;        android:text=&quot;Đăng Ký&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;28sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#10;&#10;    &lt;!-- Full Name Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilFullName&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvSignUpTitle&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etFullName&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Họ và Tên&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Email Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilEmail&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilFullName&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etEmail&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Email&quot;&#10;            android:inputType=&quot;textEmailAddress&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Phone Number Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilPhoneNumber&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilEmail&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etPhoneNumber&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Số điện thoại&quot;&#10;            android:inputType=&quot;phone&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Password Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilPassword&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPhoneNumber&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:endIconMode=&quot;password_toggle&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etPassword&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Mật Khẩu&quot;&#10;            android:inputType=&quot;textPassword&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Confirm Password Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilConfirmPassword&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPassword&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        app:endIconMode=&quot;password_toggle&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etConfirmPassword&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Xác Nhận Mật Khẩu&quot;&#10;            android:inputType=&quot;textPassword&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Next Button --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnNext&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#10;        android:text=&quot;Tiếp Tục&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;&#10;        android:textSize=&quot;18sp&quot;&#10;        app:cornerRadius=&quot;24dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilConfirmPassword&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvOrSignUpWith&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:text=&quot;hoặc Đăng ký với &quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/btnNext&quot; /&gt;&#10;&#10;    &lt;!-- Social Sign Up Options --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/llSocialSignUp&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvOrSignUpWith&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivGoogleSignUp&quot;&#10;            android:layout_width=&quot;48dp&quot;&#10;            android:layout_height=&quot;48dp&quot;&#10;            android:layout_marginEnd=&quot;24dp&quot;&#10;            android:contentDescription=&quot;Sign up with Google&quot;&#10;            android:src=&quot;@drawable/ic_google&quot; /&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/ivFacebookSignUp&quot;&#10;            android:layout_width=&quot;48dp&quot;&#10;            android:layout_height=&quot;48dp&quot;&#10;            android:contentDescription=&quot;Sign up with Facebook&quot;&#10;            android:src=&quot;@drawable/ic_facebook&quot; /&gt;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Login Link --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvLoginLink&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:clickable=&quot;true&quot;&#10;        android:focusable=&quot;true&quot;&#10;        android:text=&quot;Đã có tài khoản? Đăng nhập&quot;&#10;        android:textColor=&quot;#8F9BB3&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/llSocialSignUp&quot; /&gt;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#13;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#13;&#10;    android:layout_width=&quot;match_parent&quot;&#13;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#13;&#10;&#13;&#10;    &lt;!-- Sign Up Title --&gt;&#13;&#10;    &lt;TextView&#13;&#10;        android:id=&quot;@+id/tvSignUpTitle&quot;&#13;&#10;        android:layout_width=&quot;wrap_content&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_marginTop=&quot;48dp&quot;&#13;&#10;        android:text=&quot;Đăng Ký&quot;&#13;&#10;        android:textColor=&quot;#222B45&quot;&#13;&#10;        android:textSize=&quot;28sp&quot;&#13;&#10;        android:textStyle=&quot;bold&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;!-- Username Field (Thay đổi từ Full Name) --&gt;&#13;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#13;&#10;        android:id=&quot;@+id/tilUsername&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvSignUpTitle&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        android:layout_marginTop=&quot;32dp&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#13;&#10;            android:id=&quot;@+id/etUsername&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:hint=&quot;Username&quot; /&gt;&#13;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Email Field --&gt;&#13;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#13;&#10;        android:id=&quot;@+id/tilEmail&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilUsername&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#13;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#13;&#10;            android:id=&quot;@+id/etEmail&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:hint=&quot;Email&quot;&#13;&#10;            android:inputType=&quot;textEmailAddress&quot;/&gt;&#13;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Phone Number Field --&gt;&#13;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#13;&#10;        android:id=&quot;@+id/tilPhoneNumber&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilEmail&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#13;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#13;&#10;            android:id=&quot;@+id/etPhoneNumber&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:hint=&quot;Số điện thoại&quot;&#13;&#10;            android:inputType=&quot;phone&quot;/&gt;&#13;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Password Field --&gt;&#13;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#13;&#10;        android:id=&quot;@+id/tilPassword&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPhoneNumber&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#13;&#10;        app:endIconMode=&quot;password_toggle&quot;&gt;&#13;&#10;&#13;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#13;&#10;            android:id=&quot;@+id/etPassword&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:hint=&quot;Mật Khẩu&quot;&#13;&#10;            android:inputType=&quot;textPassword&quot; /&gt;&#13;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Confirm Password Field --&gt;&#13;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#13;&#10;        android:id=&quot;@+id/tilConfirmPassword&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilPassword&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#13;&#10;        app:endIconMode=&quot;password_toggle&quot;&gt;&#13;&#10;&#13;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#13;&#10;            android:id=&quot;@+id/etConfirmPassword&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:hint=&quot;Xác Nhận Mật Khẩu&quot;&#13;&#10;            android:inputType=&quot;textPassword&quot; /&gt;&#13;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Next Button --&gt;&#13;&#10;    &lt;com.google.android.material.button.MaterialButton&#13;&#10;        android:id=&quot;@+id/btnNext&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_marginStart=&quot;32dp&quot;&#13;&#10;        android:layout_marginTop=&quot;32dp&quot;&#13;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#13;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#13;&#10;        android:text=&quot;Tiếp Tục&quot;&#13;&#10;        android:textColor=&quot;#FFFFFF&quot;&#13;&#10;        android:textSize=&quot;18sp&quot;&#13;&#10;        app:cornerRadius=&quot;24dp&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilConfirmPassword&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;TextView&#13;&#10;        android:id=&quot;@+id/tvOrSignUpWith&quot;&#13;&#10;        android:layout_width=&quot;wrap_content&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:text=&quot;hoặc Đăng ký với &quot;&#13;&#10;        android:textColor=&quot;#8F9BB3&quot;&#13;&#10;        android:textSize=&quot;14sp&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/btnNext&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;!-- Social Sign Up Options --&gt;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:id=&quot;@+id/llSocialSignUp&quot;&#13;&#10;        android:layout_width=&quot;wrap_content&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_marginTop=&quot;16dp&quot;&#13;&#10;        android:orientation=&quot;horizontal&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvOrSignUpWith&quot;&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/ivGoogleSignUp&quot;&#13;&#10;            android:layout_width=&quot;48dp&quot;&#13;&#10;            android:layout_height=&quot;48dp&quot;&#13;&#10;            android:layout_marginEnd=&quot;24dp&quot;&#13;&#10;            android:contentDescription=&quot;Sign up with Google&quot;&#13;&#10;            android:src=&quot;@drawable/ic_google&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/ivFacebookSignUp&quot;&#13;&#10;            android:layout_width=&quot;48dp&quot;&#13;&#10;            android:layout_height=&quot;48dp&quot;&#13;&#10;            android:contentDescription=&quot;Sign up with Facebook&quot;&#13;&#10;            android:src=&quot;@drawable/ic_facebook&quot; /&gt;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Login Link --&gt;&#13;&#10;    &lt;TextView&#13;&#10;        android:id=&quot;@+id/tvLoginLink&quot;&#13;&#10;        android:layout_width=&quot;wrap_content&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_marginTop=&quot;24dp&quot;&#13;&#10;        android:clickable=&quot;true&quot;&#13;&#10;        android:focusable=&quot;true&quot;&#13;&#10;        android:text=&quot;Đã có tài khoản? Đăng nhập&quot;&#13;&#10;        android:textColor=&quot;#8F9BB3&quot;&#13;&#10;        android:textSize=&quot;14sp&quot;&#13;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#13;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/llSocialSignUp&quot; /&gt;&#13;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/layout_register_id_card.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/layout_register_id_card.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#10;&#10;    &lt;!-- ID Card Information Title --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvIdCardTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;48dp&quot;&#10;        android:text=&quot;Thông tin CCCD&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;28sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#10;&#10;    &lt;!-- ID Card Number Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIdCardNumber&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvIdCardTitle&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIdCardNumber&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Số CCCD&quot;&#10;            android:inputType=&quot;number&quot;&#10;            android:maxLength=&quot;12&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Date Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssueDate&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIdCardNumber&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssueDate&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày cấp&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Place Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssuePlace&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssueDate&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssuePlace&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Nơi cấp&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Front ID Card Image Upload --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvFrontIdCardLabel&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Ảnh mặt trước CCCD&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssuePlace&quot; /&gt;&#10;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/ivFrontIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:scaleType=&quot;centerInside&quot;&#10;        android:src=&quot;@android:drawable/ic_menu_camera&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvFrontIdCardLabel&quot; /&gt;&#10;&#10;    &lt;!-- Back ID Card Image Upload --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvBackIdCardLabel&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Ảnh mặt sau CCCD&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/ivFrontIdCard&quot; /&gt;&#10;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/ivBackIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:scaleType=&quot;centerInside&quot;&#10;        android:src=&quot;@android:drawable/ic_menu_camera&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvBackIdCardLabel&quot; /&gt;&#10;&#10;    &lt;!-- Next Button --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnSubmitIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#10;        android:text=&quot;Tiếp Tục&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;&#10;        android:textSize=&quot;18sp&quot;&#10;        app:cornerRadius=&quot;24dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/ivBackIdCard&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>