<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ForgotPasswordActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ForgotPasswordActivity.java" />
              <option name="originalContent" value="package com.parkmate.android.activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.EditText;&#10;import android.widget.ImageButton;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;&#10;public class ForgotPasswordActivity extends AppCompatActivity {&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private ImageButton btnBack;&#10;    private String userEmail;&#10;&#10;    // Email Screen Views&#10;    private TextInputEditText etEmail;&#10;    private Button btnSend;&#10;&#10;    // Check Email Screen Views&#10;    private TextView tvUserEmail;&#10;    private Button btnContinue;&#10;&#10;    // OTP Screen Views&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;    private TextView tvResendCode;&#10;    private Button btnVerify;&#10;&#10;    // New Password Screen Views&#10;    private TextInputEditText etNewPassword, etConfirmPassword;&#10;    private Button btnResetPassword;&#10;&#10;    // Success Screen View&#10;    private Button btnLogin;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_forgot_password);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        initViews();&#10;        setupListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;        btnBack = findViewById(R.id.btnBack);&#10;&#10;        // Initialize Email Screen Views&#10;        View emailView = viewFlipper.getChildAt(0);&#10;        etEmail = emailView.findViewById(R.id.etEmail);&#10;        btnSend = emailView.findViewById(R.id.btnSend);&#10;&#10;        // Initialize Check Email Screen Views&#10;        View checkEmailView = viewFlipper.getChildAt(1);&#10;        tvUserEmail = checkEmailView.findViewById(R.id.tvUserEmail);&#10;        btnContinue = checkEmailView.findViewById(R.id.btnContinue);&#10;&#10;        // Initialize OTP Screen Views&#10;        View otpView = viewFlipper.getChildAt(2);&#10;        etOtp1 = otpView.findViewById(R.id.etOtp1);&#10;        etOtp2 = otpView.findViewById(R.id.etOtp2);&#10;        etOtp3 = otpView.findViewById(R.id.etOtp3);&#10;        etOtp4 = otpView.findViewById(R.id.etOtp4);&#10;        etOtp5 = otpView.findViewById(R.id.etOtp5);&#10;        etOtp6 = otpView.findViewById(R.id.etOtp6);&#10;        tvResendCode = otpView.findViewById(R.id.tvResendCode);&#10;        btnVerify = otpView.findViewById(R.id.btnVerify);&#10;&#10;        // Initialize New Password Screen Views&#10;        View newPasswordView = viewFlipper.getChildAt(3);&#10;        etNewPassword = newPasswordView.findViewById(R.id.etNewPassword);&#10;        etConfirmPassword = newPasswordView.findViewById(R.id.etConfirmPassword);&#10;        btnResetPassword = newPasswordView.findViewById(R.id.btnResetPassword);&#10;&#10;        // Initialize Success Screen Views&#10;        View successView = viewFlipper.getChildAt(4);&#10;        btnLogin = successView.findViewById(R.id.btnLogin);&#10;    }&#10;&#10;    private void setupListeners() {&#10;        // Back button listener&#10;        btnBack.setOnClickListener(v -&gt; handleBackPress());&#10;&#10;        // Email Screen Listeners&#10;        btnSend.setOnClickListener(v -&gt; {&#10;            if (validateEmail()) {&#10;                userEmail = etEmail.getText().toString().trim();&#10;                // Here would be API call to send OTP to email&#10;                sendOtp(userEmail);&#10;            }&#10;        });&#10;&#10;        // Check Email Screen Listeners&#10;        btnContinue.setOnClickListener(v -&gt; {&#10;            viewFlipper.setDisplayedChild(2); // Move to OTP screen&#10;        });&#10;&#10;        // OTP Screen Listeners&#10;        setupOtpInputs();&#10;        tvResendCode.setOnClickListener(v -&gt; {&#10;            // Here would be API call to resend OTP&#10;            Toast.makeText(this, &quot;OTP resent to your email&quot;, Toast.LENGTH_SHORT).show();&#10;        });&#10;        btnVerify.setOnClickListener(v -&gt; {&#10;            if (validateOtp()) {&#10;                // Here would be API call to verify OTP&#10;                verifyOtp();&#10;            }&#10;        });&#10;&#10;        // New Password Screen Listeners&#10;        btnResetPassword.setOnClickListener(v -&gt; {&#10;            if (validatePasswords()) {&#10;                // Here would be API call to reset password&#10;                resetPassword();&#10;            }&#10;        });&#10;&#10;        // Success Screen Listeners&#10;        btnLogin.setOnClickListener(v -&gt; {&#10;            // Navigate to login screen&#10;            finish(); // This would typically go to your login activity&#10;        });&#10;    }&#10;&#10;    private boolean validateEmail() {&#10;        String email = etEmail.getText().toString().trim();&#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Email cannot be empty&quot;);&#10;            return false;&#10;        } else if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            etEmail.setError(&quot;Please enter a valid email address&quot;);&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void sendOtp(String email) {&#10;        // Simulate API call to send OTP&#10;        // In a real app, you would make an API call here&#10;&#10;        tvUserEmail.setText(email);&#10;        viewFlipper.setDisplayedChild(1); // Move to Check Email screen&#10;    }&#10;&#10;    private void setupOtpInputs() {&#10;        EditText[] otpFields = {etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6};&#10;&#10;        for (int i = 0; i &lt; otpFields.length; i++) {&#10;            final int currentIndex = i;&#10;            otpFields[i].addTextChangedListener(new TextWatcher() {&#10;                @Override&#10;                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;                @Override&#10;                public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;                    if (s.length() == 1 &amp;&amp; currentIndex &lt; otpFields.length - 1) {&#10;                        otpFields[currentIndex + 1].requestFocus();&#10;                    }&#10;                }&#10;&#10;                @Override&#10;                public void afterTextChanged(Editable s) {}&#10;            });&#10;        }&#10;    }&#10;&#10;    private boolean validateOtp() {&#10;        // Get OTP from all fields&#10;        String otp = etOtp1.getText().toString() +&#10;                etOtp2.getText().toString() +&#10;                etOtp3.getText().toString() +&#10;                etOtp4.getText().toString() +&#10;                etOtp5.getText().toString() +&#10;                etOtp6.getText().toString();&#10;&#10;        if (otp.length() != 6) {&#10;            Toast.makeText(this, &quot;Please enter a valid 6-digit OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void verifyOtp() {&#10;        // Simulate API call to verify OTP&#10;        // In a real app, you would make an API call here&#10;&#10;        viewFlipper.setDisplayedChild(3); // Move to New Password screen&#10;    }&#10;&#10;    private boolean validatePasswords() {&#10;        String newPassword = etNewPassword.getText().toString().trim();&#10;        String confirmPassword = etConfirmPassword.getText().toString().trim();&#10;&#10;        if (newPassword.isEmpty()) {&#10;            etNewPassword.setError(&quot;Password cannot be empty&quot;);&#10;            return false;&#10;        } else if (newPassword.length() &lt; 6) {&#10;            etNewPassword.setError(&quot;Password must be at least 6 characters&quot;);&#10;            return false;&#10;        } else if (confirmPassword.isEmpty()) {&#10;            etConfirmPassword.setError(&quot;Confirm password cannot be empty&quot;);&#10;            return false;&#10;        } else if (!newPassword.equals(confirmPassword)) {&#10;            etConfirmPassword.setError(&quot;Passwords do not match&quot;);&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void resetPassword() {&#10;        // Simulate API call to reset password&#10;        // In a real app, you would make an API call here&#10;&#10;        viewFlipper.setDisplayedChild(4); // Move to Success screen&#10;    }&#10;&#10;    private void handleBackPress() {&#10;        int currentScreen = viewFlipper.getDisplayedChild();&#10;        if (currentScreen &gt; 0) {&#10;            viewFlipper.setDisplayedChild(currentScreen - 1);&#10;        } else {&#10;            finish();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void onBackPressed() {&#10;        handleBackPress();&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.EditText;&#10;import android.widget.ImageButton;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;&#10;public class ForgotPasswordActivity extends AppCompatActivity {&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private ImageButton btnBack;&#10;    private String userEmail;&#10;&#10;    // Email Screen Views&#10;    private TextInputEditText etEmail;&#10;    private Button btnSend;&#10;&#10;    // Check Email Screen Views&#10;    private TextView tvUserEmail;&#10;    private Button btnContinue;&#10;&#10;    // OTP Screen Views&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;    private TextView tvResendCode;&#10;    private Button btnVerify;&#10;&#10;    // New Password Screen Views&#10;    private TextInputEditText etNewPassword, etConfirmPassword;&#10;    private Button btnResetPassword;&#10;&#10;    // Success Screen View&#10;    private Button btnLogin;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_forgot_password);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        initViews();&#10;        setupListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;        btnBack = findViewById(R.id.btnBack);&#10;&#10;        // Initialize Email Screen Views&#10;        View emailView = viewFlipper.getChildAt(0);&#10;        etEmail = emailView.findViewById(R.id.etEmail);&#10;        btnSend = emailView.findViewById(R.id.btnSend);&#10;&#10;        // Initialize Check Email Screen Views&#10;        View checkEmailView = viewFlipper.getChildAt(1);&#10;        tvUserEmail = checkEmailView.findViewById(R.id.tvUserEmail);&#10;        btnContinue = checkEmailView.findViewById(R.id.btnContinue);&#10;&#10;        // Initialize OTP Screen Views&#10;        View otpView = viewFlipper.getChildAt(2);&#10;        etOtp1 = otpView.findViewById(R.id.etOtp1);&#10;        etOtp2 = otpView.findViewById(R.id.etOtp2);&#10;        etOtp3 = otpView.findViewById(R.id.etOtp3);&#10;        etOtp4 = otpView.findViewById(R.id.etOtp4);&#10;        etOtp5 = otpView.findViewById(R.id.etOtp5);&#10;        etOtp6 = otpView.findViewById(R.id.etOtp6);&#10;        tvResendCode = otpView.findViewById(R.id.tvResendCode);&#10;        btnVerify = otpView.findViewById(R.id.btnVerify);&#10;&#10;        // Initialize New Password Screen Views&#10;        View newPasswordView = viewFlipper.getChildAt(3);&#10;        etNewPassword = newPasswordView.findViewById(R.id.etNewPassword);&#10;        etConfirmPassword = newPasswordView.findViewById(R.id.etConfirmPassword);&#10;        btnResetPassword = newPasswordView.findViewById(R.id.btnResetPassword);&#10;&#10;        // Initialize Success Screen Views&#10;        View successView = viewFlipper.getChildAt(4);&#10;        btnLogin = successView.findViewById(R.id.btnLogin);&#10;    }&#10;&#10;    private void setupListeners() {&#10;        // Back button listener&#10;        btnBack.setOnClickListener(v -&gt; handleBackPress());&#10;&#10;        // Email Screen Listeners&#10;        btnSend.setOnClickListener(v -&gt; {&#10;            if (validateEmail()) {&#10;                userEmail = etEmail.getText().toString().trim();&#10;                // Here would be API call to send OTP to email&#10;                sendOtp(userEmail);&#10;            }&#10;        });&#10;&#10;        // Check Email Screen Listeners&#10;        btnContinue.setOnClickListener(v -&gt; {&#10;            viewFlipper.setDisplayedChild(2); // Move to OTP screen&#10;        });&#10;&#10;        // OTP Screen Listeners&#10;        setupOtpInputs();&#10;        tvResendCode.setOnClickListener(v -&gt; {&#10;            // Here would be API call to resend OTP&#10;            Toast.makeText(this, &quot;OTP resent to your email&quot;, Toast.LENGTH_SHORT).show();&#10;        });&#10;        btnVerify.setOnClickListener(v -&gt; {&#10;            if (validateOtp()) {&#10;                // Here would be API call to verify OTP&#10;                verifyOtp();&#10;            }&#10;        });&#10;&#10;        // New Password Screen Listeners&#10;        btnResetPassword.setOnClickListener(v -&gt; {&#10;            if (validatePasswords()) {&#10;                // Here would be API call to reset password&#10;                resetPassword();&#10;            }&#10;        });&#10;&#10;        // Success Screen Listeners&#10;        btnLogin.setOnClickListener(v -&gt; {&#10;            // Navigate to login screen&#10;            finish(); // This would typically go to your login activity&#10;        });&#10;    }&#10;&#10;    private boolean validateEmail() {&#10;        String email = etEmail.getText().toString().trim();&#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Email cannot be empty&quot;);&#10;            return false;&#10;        } else if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            etEmail.setError(&quot;Please enter a valid email address&quot;);&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void sendOtp(String email) {&#10;        // Simulate API call to send OTP&#10;        // In a real app, you would make an API call here&#10;&#10;        tvUserEmail.setText(email);&#10;        viewFlipper.setDisplayedChild(1); // Move to Check Email screen&#10;    }&#10;&#10;    private void setupOtpInputs() {&#10;        EditText[] otpFields = {etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6};&#10;&#10;        for (int i = 0; i &lt; otpFields.length; i++) {&#10;            final int currentIndex = i;&#10;            otpFields[i].addTextChangedListener(new TextWatcher() {&#10;                @Override&#10;                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;                @Override&#10;                public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;                    if (s.length() == 1 &amp;&amp; currentIndex &lt; otpFields.length - 1) {&#10;                        otpFields[currentIndex + 1].requestFocus();&#10;                    }&#10;                }&#10;&#10;                @Override&#10;                public void afterTextChanged(Editable s) {}&#10;            });&#10;        }&#10;    }&#10;&#10;    private boolean validateOtp() {&#10;        // Get OTP from all fields&#10;        String otp = etOtp1.getText().toString() +&#10;                etOtp2.getText().toString() +&#10;                etOtp3.getText().toString() +&#10;                etOtp4.getText().toString() +&#10;                etOtp5.getText().toString() +&#10;                etOtp6.getText().toString();&#10;&#10;        if (otp.length() != 6) {&#10;            Toast.makeText(this, &quot;Please enter a valid 6-digit OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void verifyOtp() {&#10;        // Simulate API call to verify OTP&#10;        // In a real app, you would make an API call here&#10;&#10;        viewFlipper.setDisplayedChild(3); // Move to New Password screen&#10;    }&#10;&#10;    private boolean validatePasswords() {&#10;        String newPassword = etNewPassword.getText().toString().trim();&#10;        String confirmPassword = etConfirmPassword.getText().toString().trim();&#10;&#10;        if (newPassword.isEmpty()) {&#10;            etNewPassword.setError(&quot;Password cannot be empty&quot;);&#10;            return false;&#10;        } else if (newPassword.length() &lt; 6) {&#10;            etNewPassword.setError(&quot;Password must be at least 6 characters&quot;);&#10;            return false;&#10;        } else if (confirmPassword.isEmpty()) {&#10;            etConfirmPassword.setError(&quot;Confirm password cannot be empty&quot;);&#10;            return false;&#10;        } else if (!newPassword.equals(confirmPassword)) {&#10;            etConfirmPassword.setError(&quot;Passwords do not match&quot;);&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;&#10;    private void resetPassword() {&#10;        // Simulate API call to reset password&#10;        // In a real app, you would make an API call here&#10;&#10;        viewFlipper.setDisplayedChild(4); // Move to Success screen&#10;    }&#10;&#10;    private void handleBackPress() {&#10;        int currentScreen = viewFlipper.getDisplayedChild();&#10;        if (currentScreen &gt; 0) {&#10;            viewFlipper.setDisplayedChild(currentScreen - 1);&#10;        } else {&#10;            finish();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void onBackPressed() {&#10;        super.onBackPressed();&#10;        handleBackPress();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ParkingDetailActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/ParkingDetailActivity.java" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.os.Bundle;&#10;&#10;import com.parkmate.android.R;&#10;&#10;public class ParkingDetailActivity extends BaseActivity {&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        &#10;        // Thiết lập toolbar với nút quay lại (vì đây KHÔNG phải màn hình chính)&#10;        setupToolbar(false, &quot;Chi tiết bãi đỗ xe&quot;);&#10;        &#10;        // Ẩn bottom navigation vì đây là màn hình chi tiết&#10;        setupBottomNavigation(false, 0);&#10;        &#10;        // Khởi tạo các thành phần của màn hình chi tiết&#10;        initComponents();&#10;    }&#10;&#10;    @Override&#10;    protected int getLayoutResourceId() {&#10;        // Trả về ID layout của ParkingDetailActivity&#10;        return R.layout.activity_parking_detail;&#10;    }&#10;    &#10;    private void initComponents() {&#10;        // Khởi tạo các thành phần và xử lý sự kiện&#10;        // VD: Hiển thị thông tin chi tiết bãi đỗ xe, đặt chỗ, thanh toán...&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java.fixed">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/RegisterActivity.java.fixed" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.net.Uri;&#10;import android.os.Bundle;&#10;import android.provider.MediaStore;&#10;import android.text.Editable;&#10;import android.text.SpannableString;&#10;import android.text.Spanned;&#10;import android.text.TextWatcher;&#10;import android.text.method.LinkMovementMethod;&#10;import android.text.style.ClickableSpan;&#10;import android.text.style.ForegroundColorSpan;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.ArrayAdapter;&#10;import android.widget.AutoCompleteTextView;&#10;import android.widget.Button;&#10;import android.widget.CheckBox;&#10;import android.widget.EditText;&#10;import android.widget.FrameLayout;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import android.widget.ViewFlipper;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.activity.result.ActivityResultLauncher;&#10;import androidx.activity.result.contract.ActivityResultContracts;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.android.material.textfield.TextInputLayout;&#10;import com.parkmate.android.R;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.Calendar;&#10;import java.util.Locale;&#10;&#10;public class RegisterActivity extends AppCompatActivity {&#10;&#10;    private static final String TAG = &quot;RegisterActivity&quot;;&#10;&#10;    private ViewFlipper viewFlipper;&#10;    private TextInputEditText etFullName, etEmail, etPassword, etConfirmPassword;&#10;    private TextInputEditText etCccdNumber, etIdFullName, etDateOfBirth, etIssueDate, etIssuePlace;&#10;    private TextInputEditText etNationality, etPermanentAddress;&#10;    private AutoCompleteTextView actvGender;&#10;    private TextInputLayout tilDateOfBirth, tilIssueDate, tilGender;&#10;    private MaterialButton btnNext;&#10;    private Button btnContinue, btnVerify, btnLogin;&#10;    private ImageView ivBack, ivGoogleSignUp, ivFacebookSignUp;&#10;    private TextView tvLoginLink, tvUserEmail, tvResendCode;&#10;    private FrameLayout flFrontImage, flBackImage;&#10;    private ImageView ivFrontImage, ivBackImage;&#10;    private LinearLayout llFrontImagePlaceholder, llBackImagePlaceholder;&#10;    private CheckBox cbCommitment;&#10;    &#10;    // OTP fields&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5, etOtp6;&#10;&#10;    private Calendar calendar;&#10;    private SimpleDateFormat dateFormatter;&#10;    private Uri frontImageUri, backImageUri;&#10;    private String userEmail; // Store user email for OTP verification&#10;&#10;    // Activity result launchers for camera and gallery&#10;    private ActivityResultLauncher&lt;Intent&gt; frontCameraLauncher;&#10;    private ActivityResultLauncher&lt;Intent&gt; backCameraLauncher;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_register);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Khởi tạo Calendar và định dạng ngày tháng&#10;        calendar = Calendar.getInstance();&#10;        dateFormatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;&#10;        // Khởi tạo ActivityResultLauncher cho chụp ảnh&#10;        setupImageCaptureLaunchers();&#10;&#10;        initViews();&#10;        setupGenderDropdown();&#10;        setupListeners();&#10;        setupLoginLink();&#10;        setupDatePickers();&#10;        setupImageCapture();&#10;    }&#10;&#10;    private void setupImageCaptureLaunchers() {&#10;        // Launcher cho hình ảnh mặt trước CCCD&#10;        frontCameraLauncher = registerForActivityResult(&#10;            new ActivityResultContracts.StartActivityForResult(),&#10;            result -&gt; {&#10;                if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                    // Xử lý hình ảnh được chụp&#10;                    Bundle extras = result.getData().getExtras();&#10;                    if (extras != null) {&#10;                        Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                        if (imageUri != null) {&#10;                            frontImageUri = imageUri;&#10;                            ivFrontImage.setImageURI(frontImageUri);&#10;                            ivFrontImage.setVisibility(View.VISIBLE);&#10;                            llFrontImagePlaceholder.setVisibility(View.GONE);&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        );&#10;&#10;        // Launcher cho hình ảnh mặt sau CCCD&#10;        backCameraLauncher = registerForActivityResult(&#10;            new ActivityResultContracts.StartActivityForResult(),&#10;            result -&gt; {&#10;                if (result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null) {&#10;                    // Xử lý hình ảnh được chụp&#10;                    Bundle extras = result.getData().getExtras();&#10;                    if (extras != null) {&#10;                        Uri imageUri = (Uri) extras.get(&quot;data&quot;);&#10;                        if (imageUri != null) {&#10;                            backImageUri = imageUri;&#10;                            ivBackImage.setImageURI(backImageUri);&#10;                            ivBackImage.setVisibility(View.VISIBLE);&#10;                            llBackImagePlaceholder.setVisibility(View.GONE);&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        );&#10;    }&#10;&#10;    private void initViews() {&#10;        viewFlipper = findViewById(R.id.viewFlipper);&#10;&#10;        // Ánh xạ các view từ layout đầu tiên (Thông tin cơ bản)&#10;        etFullName = findViewById(R.id.etFullName);&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        etConfirmPassword = findViewById(R.id.etConfirmPassword);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        ivGoogleSignUp = findViewById(R.id.ivGoogleSignUp);&#10;        ivFacebookSignUp = findViewById(R.id.ivFacebookSignUp);&#10;        tvLoginLink = findViewById(R.id.tvLoginLink);&#10;&#10;        // Ánh xạ các view từ layout thứ hai (Thông tin CCCD)&#10;        etCccdNumber = findViewById(R.id.etCccdNumber);&#10;        etIdFullName = findViewById(R.id.etIdFullName);&#10;        etDateOfBirth = findViewById(R.id.etDateOfBirth);&#10;        etIssueDate = findViewById(R.id.etIssueDate);&#10;        etIssuePlace = findViewById(R.id.etIssuePlace);&#10;        tilDateOfBirth = findViewById(R.id.tilDateOfBirth);&#10;        tilIssueDate = findViewById(R.id.tilIssueDate);&#10;&#10;        // Ánh xạ các trường mới được thêm vào&#10;        actvGender = findViewById(R.id.actvGender);&#10;        tilGender = findViewById(R.id.tilGender);&#10;        etNationality = findViewById(R.id.etNationality);&#10;        etPermanentAddress = findViewById(R.id.etPermanentAddress);&#10;&#10;        // Ánh xạ nút &quot;Tiếp tục&quot; trong layout CCCD info&#10;        btnContinue = findViewById(R.id.btnContinue);&#10;&#10;        // Ánh xạ nút quay lại dưới dạng mũi tên&#10;        ivBack = findViewById(R.id.ivBack);&#10;&#10;        // Ánh xạ các view cho hình ảnh&#10;        flFrontImage = findViewById(R.id.flFrontImage);&#10;        flBackImage = findViewById(R.id.flBackImage);&#10;        ivFrontImage = findViewById(R.id.ivFrontImage);&#10;        ivBackImage = findViewById(R.id.ivBackImage);&#10;        llFrontImagePlaceholder = findViewById(R.id.llFrontImagePlaceholder);&#10;        llBackImagePlaceholder = findViewById(R.id.llBackImagePlaceholder);&#10;&#10;        // Ánh xạ checkbox cam kết&#10;        cbCommitment = findViewById(R.id.cbCommitment);&#10;    }&#10;&#10;    private void setupGenderDropdown() {&#10;        // Thiết lập dropdown cho lựa chọn giới tính&#10;        String[] genderOptions = {&quot;Nam&quot;, &quot;Nữ&quot;, &quot;Khác&quot;};&#10;        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(&#10;            this,&#10;            android.R.layout.simple_dropdown_item_1line,&#10;            genderOptions&#10;        );&#10;        if (actvGender != null) {&#10;            actvGender.setAdapter(adapter);&#10;        }&#10;    }&#10;&#10;    private void setupImageCapture() {&#10;        // Thiết lập sự kiện khi nhấn vào khung chụp ảnh&#10;        if (flFrontImage != null) {&#10;            flFrontImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    frontCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                        &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                        Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;&#10;        if (flBackImage != null) {&#10;            flBackImage.setOnClickListener(v -&gt; {&#10;                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#10;                if (takePictureIntent.resolveActivity(getPackageManager()) != null) {&#10;                    backCameraLauncher.launch(takePictureIntent);&#10;                } else {&#10;                    Toast.makeText(RegisterActivity.this,&#10;                        &quot;Không tìm thấy ứng dụng máy ảnh&quot;,&#10;                        Toast.LENGTH_SHORT).show();&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    private void setupListeners() {&#10;        // Back button (mũi tên quay về)&#10;        ivBack.setOnClickListener(v -&gt; {&#10;            // Quay về màn hình trước đó&#10;            if (viewFlipper.getDisplayedChild() &gt; 0) {&#10;                viewFlipper.showPrevious();&#10;            } else {&#10;                finish(); // Nếu đang ở màn hình đầu tiên, thoát activity&#10;            }&#10;        });&#10;&#10;        // Xử lý sự kiện nút Tiếp Tục ở màn hình thông tin cơ bản&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            if (validateBasicInfo()) {&#10;                // Tự động điền họ tên từ trang 1 sang trang 2&#10;                if (etIdFullName != null &amp;&amp; etFullName != null) {&#10;                    etIdFullName.setText(etFullName.getText().toString().trim());&#10;                }&#10;                viewFlipper.showNext(); // Chuyển sang trang thông tin CCCD&#10;            }&#10;        });&#10;&#10;        // Xử lý sự kiện nút Tiếp Tục ở màn hình thông tin CCCD&#10;        if (btnContinue != null) {&#10;            btnContinue.setOnClickListener(v -&gt; {&#10;                if (validateCccdInfo()) {&#10;                    // Lưu email để hiển thị trên màn hình Check Email&#10;                    userEmail = etEmail.getText().toString().trim();&#10;                    &#10;                    // Chuyển sang màn hình check email&#10;                    viewFlipper.setDisplayedChild(2); // Index 2 is the Check Email layout&#10;                    &#10;                    // Gửi OTP qua email&#10;                    sendOTPToEmail(userEmail);&#10;                    &#10;                    // Cập nhật UI cho màn hình check email sau khi chuyển sang&#10;                    setupCheckEmailScreen();&#10;                }&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình Check Email&#10;    private void setupCheckEmailScreen() {&#10;        // Ánh xạ các view trong màn hình check email&#10;        TextView tvTitle = findViewById(R.id.tvTitle);&#10;        TextView tvDescription = findViewById(R.id.tvDescription);&#10;        tvUserEmail = findViewById(R.id.tvUserEmail);&#10;        Button btnEmailContinue = findViewById(R.id.btnContinue);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvTitle != null) {&#10;            tvTitle.setText(R.string.register_check_email);&#10;        }&#10;        &#10;        if (tvDescription != null) {&#10;            tvDescription.setText(R.string.register_check_email_description);&#10;        }&#10;        &#10;        // Hiển thị email của người dùng&#10;        if (tvUserEmail != null) {&#10;            tvUserEmail.setText(userEmail);&#10;        }&#10;        &#10;        // Quan trọng: thiết lập sự kiện cho nút tiếp tục&#10;        if (btnEmailContinue != null) {&#10;            Log.d(TAG, &quot;Setting up continue button in check email screen&quot;);&#10;            btnEmailContinue.setOnClickListener(new View.OnClickListener() {&#10;                @Override&#10;                public void onClick(View v) {&#10;                    Log.d(TAG, &quot;Check email continue button clicked&quot;);&#10;                    // Chuyển sang màn hình nhập OTP&#10;                    viewFlipper.setDisplayedChild(3);&#10;                    // Thiết lập màn hình OTP&#10;                    setupOtpScreen();&#10;                }&#10;            });&#10;        } else {&#10;            Log.e(TAG, &quot;btnEmailContinue is null&quot;);&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình OTP&#10;    private void setupOtpScreen() {&#10;        // Ánh xạ các view trong màn hình OTP&#10;        TextView tvTitle = findViewById(R.id.tvTitle);&#10;        TextView tvDescription = findViewById(R.id.tvDescription);&#10;        etOtp1 = findViewById(R.id.etOtp1);&#10;        etOtp2 = findViewById(R.id.etOtp2);&#10;        etOtp3 = findViewById(R.id.etOtp3);&#10;        etOtp4 = findViewById(R.id.etOtp4);&#10;        etOtp5 = findViewById(R.id.etOtp5);&#10;        etOtp6 = findViewById(R.id.etOtp6);&#10;        tvResendCode = findViewById(R.id.tvResendCode);&#10;        btnVerify = findViewById(R.id.btnVerify);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvTitle != null) {&#10;            tvTitle.setText(R.string.register_enter_otp);&#10;        }&#10;        &#10;        if (tvDescription != null) {&#10;            tvDescription.setText(R.string.register_otp_description);&#10;        }&#10;        &#10;        // Thiết lập TextWatcher cho các trường OTP&#10;        setupOtpTextWatchers();&#10;        &#10;        // Thiết lập sự kiện cho nút xác nhận OTP&#10;        if (btnVerify != null) {&#10;            btnVerify.setOnClickListener(v -&gt; {&#10;                if (validateOTP()) {&#10;                    // Xác thực OTP thành công, chuyển sang màn hình thành công&#10;                    viewFlipper.setDisplayedChild(4); // Index 4 is the Success layout&#10;                    // Thiết lập màn hình thành công&#10;                    setupSuccessScreen();&#10;                }&#10;            });&#10;        }&#10;        &#10;        // Thiết lập sự kiện cho nút gửi lại mã&#10;        if (tvResendCode != null) {&#10;            tvResendCode.setOnClickListener(v -&gt; {&#10;                sendOTPToEmail(userEmail);&#10;                Toast.makeText(RegisterActivity.this, &quot;Đã gửi lại mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Phương thức này được gọi sau khi chuyển sang màn hình thành công&#10;    private void setupSuccessScreen() {&#10;        // Ánh xạ các view trong màn hình thành công&#10;        TextView tvSuccessTitle = findViewById(R.id.tvSuccessTitle);&#10;        TextView tvSuccessDescription = findViewById(R.id.tvSuccessDescription);&#10;        btnLogin = findViewById(R.id.btnLogin);&#10;        &#10;        // Cập nhật nội dung text theo chức năng đăng ký&#10;        if (tvSuccessTitle != null) {&#10;            tvSuccessTitle.setText(R.string.registration_success);&#10;        }&#10;        &#10;        if (tvSuccessDescription != null) {&#10;            tvSuccessDescription.setText(R.string.registration_success_description);&#10;        }&#10;        &#10;        // Thiết lập sự kiện cho nút đăng nhập&#10;        if (btnLogin != null) {&#10;            btnLogin.setOnClickListener(v -&gt; {&#10;                // Đăng ký tài khoản&#10;                registerAccount();&#10;                &#10;                // Chuyển đến màn hình đăng nhập&#10;                Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);&#10;                startActivity(intent);&#10;                finish();&#10;            });&#10;        }&#10;    }&#10;    &#10;    // Thiết lập TextWatcher cho các trường OTP&#10;    private void setupOtpTextWatchers() {&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || &#10;            etOtp4 == null || etOtp5 == null || etOtp6 == null) {&#10;            return;&#10;        }&#10;        &#10;        etOtp1.addTextChangedListener(new OTPTextWatcher(etOtp1, etOtp2));&#10;        etOtp2.addTextChangedListener(new OTPTextWatcher(etOtp2, etOtp3));&#10;        etOtp3.addTextChangedListener(new OTPTextWatcher(etOtp3, etOtp4));&#10;        etOtp4.addTextChangedListener(new OTPTextWatcher(etOtp4, etOtp5));&#10;        etOtp5.addTextChangedListener(new OTPTextWatcher(etOtp5, etOtp6));&#10;        etOtp6.addTextChangedListener(new OTPTextWatcher(etOtp6, null));&#10;    }&#10;&#10;    private void setupDatePickers() {&#10;        // Thiết lập DatePicker cho ngày sinh&#10;        if (etDateOfBirth != null) {&#10;            etDateOfBirth.setOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;            tilDateOfBirth.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etDateOfBirth));&#10;        }&#10;&#10;        // Thiết lập DatePicker cho ngày cấp&#10;        if (etIssueDate != null) {&#10;            etIssueDate.setOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;            tilIssueDate.setEndIconOnClickListener(v -&gt; showDatePickerDialog(etIssueDate));&#10;        }&#10;    }&#10;&#10;    private void showDatePickerDialog(final TextInputEditText editText) {&#10;        Calendar currentCalendar = Calendar.getInstance();&#10;&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, year, month, dayOfMonth) -&gt; {&#10;                    Calendar selectedCalendar = Calendar.getInstance();&#10;                    selectedCalendar.set(year, month, dayOfMonth);&#10;                    String formattedDate = dateFormatter.format(selectedCalendar.getTime());&#10;                    editText.setText(formattedDate);&#10;                },&#10;                currentCalendar.get(Calendar.YEAR),&#10;                currentCalendar.get(Calendar.MONTH),&#10;                currentCalendar.get(Calendar.DAY_OF_MONTH)&#10;        );&#10;&#10;        // Giới hạn tuổi từ 18-100 cho ngày sinh&#10;        if (editText == etDateOfBirth) {&#10;            Calendar minAge = Calendar.getInstance();&#10;            Calendar maxAge = Calendar.getInstance();&#10;            minAge.add(Calendar.YEAR, -100);  // 100 tuổi&#10;            maxAge.add(Calendar.YEAR, -18);   // 18 tuổi&#10;            datePickerDialog.getDatePicker().setMaxDate(maxAge.getTimeInMillis());&#10;            datePickerDialog.getDatePicker().setMinDate(minAge.getTimeInMillis());&#10;        }&#10;&#10;        // Giới hạn ngày cấp không quá hiện tại&#10;        if (editText == etIssueDate) {&#10;            datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        }&#10;&#10;        datePickerDialog.show();&#10;    }&#10;&#10;    private void setupLoginLink() {&#10;        // Make 'Đăng nhập' clickable and colored&#10;        String text = &quot;Đã có tài khoản? Đăng nhập&quot;;&#10;        SpannableString ss = new SpannableString(text);&#10;        int start = text.indexOf(&quot;Đăng nhập&quot;);&#10;        int end = start + &quot;Đăng nhập&quot;.length();&#10;        ss.setSpan(new ClickableSpan() {&#10;            @Override&#10;            public void onClick(View widget) {&#10;                Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);&#10;                startActivity(intent);&#10;                finish();&#10;            }&#10;        }, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        ss.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.colorPrimary)), start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);&#10;        tvLoginLink.setText(ss);&#10;        tvLoginLink.setMovementMethod(LinkMovementMethod.getInstance());&#10;    }&#10;&#10;    private boolean validateBasicInfo() {&#10;        boolean isValid = true;&#10;&#10;        String fullName = etFullName.getText().toString().trim();&#10;        String email = etEmail.getText().toString().trim();&#10;        String password = etPassword.getText().toString().trim();&#10;        String confirmPassword = etConfirmPassword.getText().toString().trim();&#10;&#10;        // Validate fullName&#10;        if (fullName.isEmpty()) {&#10;            etFullName.setError(&quot;Vui lòng nhập họ tên&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate email&#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Vui lòng nhập email&quot;);&#10;            isValid = false;&#10;        } else if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            etEmail.setError(&quot;Email không hợp lệ&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate password&#10;        if (password.isEmpty()) {&#10;            etPassword.setError(&quot;Vui lòng nhập mật khẩu&quot;);&#10;            isValid = false;&#10;        } else if (password.length() &lt; 6) {&#10;            etPassword.setError(&quot;Mật khẩu phải có ít nhất 6 ký tự&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate confirmPassword&#10;        if (confirmPassword.isEmpty()) {&#10;            etConfirmPassword.setError(&quot;Vui lòng xác nhận mật khẩu&quot;);&#10;            isValid = false;&#10;        } else if (!confirmPassword.equals(password)) {&#10;            etConfirmPassword.setError(&quot;Mật khẩu xác nhận không khớp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    private boolean validateCccdInfo() {&#10;        boolean isValid = true;&#10;&#10;        String cccdNumber = etCccdNumber.getText().toString().trim();&#10;        String idFullName = etIdFullName.getText().toString().trim();&#10;        String dateOfBirth = etDateOfBirth.getText().toString().trim();&#10;        String issueDate = etIssueDate.getText().toString().trim();&#10;        String issuePlace = etIssuePlace.getText().toString().trim();&#10;        String gender = actvGender.getText().toString().trim();&#10;        String nationality = etNationality.getText().toString().trim();&#10;        String permanentAddress = etPermanentAddress.getText().toString().trim();&#10;&#10;        // Validate CCCD number&#10;        if (cccdNumber.isEmpty()) {&#10;            etCccdNumber.setError(&quot;Vui lòng nhập số CCCD/CMND&quot;);&#10;            isValid = false;&#10;        } else if (cccdNumber.length() != 9 &amp;&amp; cccdNumber.length() != 12) {&#10;            etCccdNumber.setError(&quot;Số CCCD phải có 12 chữ số hoặc CMND phải có 9 chữ số&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate ID full name&#10;        if (idFullName.isEmpty()) {&#10;            etIdFullName.setError(&quot;Vui lòng nhập họ tên trên CCCD/CMND&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate date of birth&#10;        if (dateOfBirth.isEmpty()) {&#10;            etDateOfBirth.setError(&quot;Vui lòng chọn ngày sinh&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate gender&#10;        if (gender.isEmpty()) {&#10;            ((TextView)actvGender).setError(&quot;Vui lòng chọn giới tính&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate nationality&#10;        if (nationality.isEmpty()) {&#10;            etNationality.setError(&quot;Vui lòng nhập quốc tịch&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate permanent address&#10;        if (permanentAddress.isEmpty()) {&#10;            etPermanentAddress.setError(&quot;Vui lòng nhập địa chỉ thường trú&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate issue date&#10;        if (issueDate.isEmpty()) {&#10;            etIssueDate.setError(&quot;Vui lòng chọn ngày cấp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate issue place&#10;        if (issuePlace.isEmpty()) {&#10;            etIssuePlace.setError(&quot;Vui lòng nhập nơi cấp&quot;);&#10;            isValid = false;&#10;        }&#10;&#10;        // Validate ID images - ĐÃ TẮT CHO MỤC ĐÍCH PHÁT TRIỂN&#10;        /*&#10;        if (frontImageUri == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chụp ảnh mặt trước CCCD/CMND&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;&#10;        if (backImageUri == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chụp ảnh mặt sau CCCD/CMND&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;        */&#10;&#10;        // Validate commitment checkbox&#10;        if (cbCommitment != null &amp;&amp; !cbCommitment.isChecked()) {&#10;            Toast.makeText(this, &quot;Vui lòng xác nhận cam kết về tính chính xác của thông tin&quot;, Toast.LENGTH_SHORT).show();&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;    &#10;    private boolean validateOTP() {&#10;        // Check if all OTP fields are filled&#10;        if (etOtp1 == null || etOtp2 == null || etOtp3 == null || &#10;            etOtp4 == null || etOtp5 == null || etOtp6 == null) {&#10;            return false;&#10;        }&#10;        &#10;        String otp1 = etOtp1.getText().toString();&#10;        String otp2 = etOtp2.getText().toString();&#10;        String otp3 = etOtp3.getText().toString();&#10;        String otp4 = etOtp4.getText().toString();&#10;        String otp5 = etOtp5.getText().toString();&#10;        String otp6 = etOtp6.getText().toString();&#10;        &#10;        if (otp1.isEmpty() || otp2.isEmpty() || otp3.isEmpty() || &#10;            otp4.isEmpty() || otp5.isEmpty() || otp6.isEmpty()) {&#10;            Toast.makeText(this, &quot;Vui lòng nhập đầy đủ mã OTP&quot;, Toast.LENGTH_SHORT).show();&#10;            return false;&#10;        }&#10;        &#10;        // For demo purposes, any 6-digit code is valid&#10;        // In a real application, you would verify the OTP against a backend service&#10;        return true;&#10;    }&#10;    &#10;    private void sendOTPToEmail(String email) {&#10;        // This is a placeholder for the actual OTP sending functionality&#10;        // In a real application, this would call an API to send the OTP to the user's email&#10;        Toast.makeText(this, &quot;Đã gửi mã OTP đến email: &quot; + email, Toast.LENGTH_SHORT).show();&#10;    }&#10;&#10;    private void registerAccount() {&#10;        String fullName = etFullName.getText().toString().trim();&#10;        String email = etEmail.getText().toString().trim();&#10;        String password = etPassword.getText().toString().trim();&#10;        String cccdNumber = etCccdNumber.getText().toString().trim();&#10;        String idFullName = etIdFullName.getText().toString().trim();&#10;        String dateOfBirth = etDateOfBirth.getText().toString().trim();&#10;        String issueDate = etIssueDate.getText().toString().trim();&#10;        String issuePlace = etIssuePlace.getText().toString().trim();&#10;        String gender = actvGender.getText().toString().trim();&#10;        String nationality = etNationality.getText().toString().trim();&#10;        String permanentAddress = etPermanentAddress.getText().toString().trim();&#10;&#10;        // TODO: Gửi thông tin đăng ký đến API hoặc lưu vào cơ sở dữ liệu cục bộ&#10;&#10;        // Log để debug&#10;        String registrationInfo = &quot;Họ tên: &quot; + fullName + &quot;\n&quot; +&#10;                                 &quot;Email: &quot; + email + &quot;\n&quot; +&#10;                                 &quot;Số CCCD: &quot; + cccdNumber + &quot;\n&quot; +&#10;                                 &quot;Tên trên CCCD: &quot; + idFullName + &quot;\n&quot; +&#10;                                 &quot;Ngày sinh: &quot; + dateOfBirth + &quot;\n&quot; +&#10;                                 &quot;Giới tính: &quot; + gender + &quot;\n&quot; +&#10;                                 &quot;Quốc tịch: &quot; + nationality + &quot;\n&quot; +&#10;                                 &quot;Địa chỉ thường trú: &quot; + permanentAddress + &quot;\n&quot; +&#10;                                 &quot;Ngày cấp: &quot; + issueDate + &quot;\n&quot; +&#10;                                 &quot;Nơi cấp: &quot; + issuePlace;&#10;&#10;        // In thông tin ra Logcat để kiểm tra&#10;        Log.d(TAG, &quot;Registered account: &quot; + registrationInfo);&#10;    }&#10;    &#10;    // Inner class for OTP text change handling&#10;    private class OTPTextWatcher implements TextWatcher {&#10;        private EditText currentEditText;&#10;        private EditText nextEditText;&#10;        &#10;        public OTPTextWatcher(EditText currentEditText, EditText nextEditText) {&#10;            this.currentEditText = currentEditText;&#10;            this.nextEditText = nextEditText;&#10;        }&#10;        &#10;        @Override&#10;        public void beforeTextChanged(CharSequence s, int start, int count, int after) {&#10;        }&#10;        &#10;        @Override&#10;        public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;        }&#10;        &#10;        @Override&#10;        public void afterTextChanged(Editable s) {&#10;            if (s.length() == 1 &amp;&amp; nextEditText != null) {&#10;                nextEditText.requestFocus();&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/SigninActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/parkmate/android/activity/SigninActivity.java" />
              <option name="updatedContent" value="package com.parkmate.android.activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.view.View;&#10;import android.widget.CheckBox;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.parkmate.android.R;&#10;&#10;public class SigninActivity extends AppCompatActivity {&#10;    &#10;    private TextInputEditText etEmail, etPassword;&#10;    private CheckBox cbRememberMe;&#10;    private MaterialButton btnLogin;&#10;    private TextView tvRegisterLink, tvForgotPassword;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.layout_login);&#10;        &#10;        // Initialize views&#10;        initViews();&#10;        &#10;        // Setup click listeners&#10;        setupClickListeners();&#10;        &#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(android.R.id.content), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;    }&#10;    &#10;    private void initViews() {&#10;        etEmail = findViewById(R.id.etEmail);&#10;        etPassword = findViewById(R.id.etPassword);&#10;        cbRememberMe = findViewById(R.id.cbRememberMe);&#10;        btnLogin = findViewById(R.id.btnLogin);&#10;        tvRegisterLink = findViewById(R.id.tvRegisterLink);&#10;        tvForgotPassword = findViewById(R.id.tvForgotPassword);&#10;    }&#10;    &#10;    private void setupClickListeners() {&#10;        // Register link click listener&#10;        tvRegisterLink.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Navigate to register screen&#10;                Intent intent = new Intent(SigninActivity.this, RegisterActivity.class);&#10;                startActivity(intent);&#10;            }&#10;        });&#10;        &#10;        // Login button click listener&#10;        btnLogin.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Implement login logic here&#10;                String email = etEmail.getText().toString().trim();&#10;                String password = etPassword.getText().toString().trim();&#10;                boolean rememberMe = cbRememberMe.isChecked();&#10;                &#10;                if (validateInput(email, password)) {&#10;                    performLogin(email, password, rememberMe);&#10;                }&#10;            }&#10;        });&#10;        &#10;        // Forgot password click listener&#10;        tvForgotPassword.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // Implement forgot password logic here&#10;                Toast.makeText(SigninActivity.this, &quot;Chức năng đặt lại mật khẩu sẽ được triển khai sau&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        });&#10;    }&#10;    &#10;    private boolean validateInput(String email, String password) {&#10;        boolean isValid = true;&#10;        &#10;        if (email.isEmpty()) {&#10;            etEmail.setError(&quot;Vui lòng nhập email&quot;);&#10;            isValid = false;&#10;        }&#10;        &#10;        if (password.isEmpty()) {&#10;            etPassword.setError(&quot;Vui lòng nhập mật khẩu&quot;);&#10;            isValid = false;&#10;        }&#10;        &#10;        return isValid;&#10;    }&#10;    &#10;    private void performLogin(String email, String password, boolean rememberMe) {&#10;        // TODO: Implement actual login logic with your API or Firebase&#10;        // This is just a placeholder&#10;        Toast.makeText(this, &quot;Đang đăng nhập...&quot;, Toast.LENGTH_SHORT).show();&#10;        &#10;        // If remember me is checked, save credentials to SharedPreferences&#10;        if (rememberMe) {&#10;            // TODO: Save login credentials or token securely&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_parking.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_parking.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvParkingPlaceholder&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Màn hình Bãi đỗ xe&quot;&#10;        android:textSize=&quot;18sp&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/component_layer_3598897.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/component_layer_3598897.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;&#10;    &lt;!-- This component represents the &quot;3598897 1&quot; layer from Zeplin. Replace ic_launcher_foreground with your actual asset if needed. --&gt;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/layer3598897&quot;&#10;        android:layout_width=&quot;120dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:src=&quot;@drawable/ic_launcher_foreground&quot;&#10;        android:contentDescription=&quot;@string/splash_logo_desc&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&#10;        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;&#10;        app:layout_constraintRight_toRightOf=&quot;parent&quot;&#10;        /&gt;&#10;&lt;/merge&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/layout_register_id_card.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/layout_register_id_card.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&gt;&#10;&#10;    &lt;!-- ID Card Information Title --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvIdCardTitle&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginTop=&quot;48dp&quot;&#10;        android:text=&quot;Thông tin CCCD&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:textSize=&quot;28sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&#10;&#10;    &lt;!-- ID Card Number Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIdCardNumber&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvIdCardTitle&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIdCardNumber&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Số CCCD&quot;&#10;            android:inputType=&quot;number&quot;&#10;            android:maxLength=&quot;12&quot; /&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Date Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssueDate&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIdCardNumber&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssueDate&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Ngày cấp&quot;&#10;            android:inputType=&quot;date&quot;&#10;            android:focusable=&quot;false&quot;&#10;            android:clickable=&quot;true&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Issue Place Field --&gt;&#10;    &lt;com.google.android.material.textfield.TextInputLayout&#10;        android:id=&quot;@+id/tilIssuePlace&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssueDate&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&gt;&#10;        &lt;com.google.android.material.textfield.TextInputEditText&#10;            android:id=&quot;@+id/etIssuePlace&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:hint=&quot;Nơi cấp&quot;/&gt;&#10;    &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;    &lt;!-- Front ID Card Image Upload --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvFrontIdCardLabel&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Ảnh mặt trước CCCD&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:layout_marginTop=&quot;24dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tilIssuePlace&quot; /&gt;&#10;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/ivFrontIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:scaleType=&quot;centerInside&quot;&#10;        android:src=&quot;@android:drawable/ic_menu_camera&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvFrontIdCardLabel&quot; /&gt;&#10;&#10;    &lt;!-- Back ID Card Image Upload --&gt;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tvBackIdCardLabel&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Ảnh mặt sau CCCD&quot;&#10;        android:textSize=&quot;16sp&quot;&#10;        android:textColor=&quot;#222B45&quot;&#10;        android:layout_marginTop=&quot;16dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/ivFrontIdCard&quot; /&gt;&#10;&#10;    &lt;ImageView&#10;        android:id=&quot;@+id/ivBackIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;120dp&quot;&#10;        android:layout_marginTop=&quot;8dp&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:background=&quot;#F7F9FC&quot;&#10;        android:scaleType=&quot;centerInside&quot;&#10;        android:src=&quot;@android:drawable/ic_menu_camera&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/tvBackIdCardLabel&quot; /&gt;&#10;&#10;    &lt;!-- Next Button --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnSubmitIdCard&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_marginStart=&quot;32dp&quot;&#10;        android:layout_marginTop=&quot;32dp&quot;&#10;        android:layout_marginEnd=&quot;32dp&quot;&#10;        android:backgroundTint=&quot;#1947ff&quot;&#10;        android:text=&quot;Tiếp Tục&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;&#10;        android:textSize=&quot;18sp&quot;&#10;        app:cornerRadius=&quot;24dp&quot;&#10;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;&#10;        app:layout_constraintStart_toStartOf=&quot;parent&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/ivBackIdCard&quot; /&gt;&#10;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>